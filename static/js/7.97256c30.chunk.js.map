{"version":3,"sources":["app/layouts/ArkPage/ArkPage.tsx","app/views/ark/CollectionView/verified-badge.svg","app/views/ark/NftView/components/SellDialog/checkmark.svg","app/views/ark/NftView/components/SellDialog/SellDialog.tsx","../node_modules/@material-ui/icons/CheckBoxOutlineBlankRounded.js","../node_modules/@material-ui/icons/InfoOutlined.js","../node_modules/@material-ui/icons/Replay.js","app/views/ark/Collections/checked-icon.svg","app/views/ark/NftView/components/assets/warning.svg","app/views/ark/NftView/components/BuyDialog/chainlink.svg","app/views/ark/NftView/components/BidDialog/BidDialog.tsx","app/views/ark/NftView/components/assets/verified-badge.svg","app/views/ark/NftView/components/BuyDialog/BuyDialog.tsx","app/views/ark/NftView/components/CancelDialog/CancelDialog.tsx","app/views/ark/NftView/components/NftImage/NftImage.tsx","app/views/ark/NftView/components/SalesDetail/types.ts","app/views/ark/NftView/components/SalesDetail/components/InfoBox/InfoBox.tsx","app/views/ark/NftView/components/SalesDetail/components/PrimaryPrice/PrimaryPrice.tsx","app/views/ark/NftView/components/SalesDetail/components/SecondaryPrice/SecondaryPrice.tsx","app/views/ark/NftView/components/SalesDetail/SalesDetail.tsx","app/views/ark/NftView/components/TraitTable/TraitTable.tsx","app/views/ark/NftView/NftView.tsx"],"names":["useStyles","makeStyles","theme","root","flex","padding","spacing","breakpoints","down","ArkPage","props","children","classes","Box","className","_path","_ellipse","_path2","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgVerifiedBadge","_ref","svgRef","title","titleId","width","height","viewBox","fill","xmlns","ref","id","d","cx","cy","rx","ry","fillOpacity","ForwardRef","SvgCheckmark","stroke","strokeWidth","strokeLinecap","strokeLinejoin","container","maxWidth","display","contentBox","flexDirection","nftBox","marginLeft","nftCard","description","marginBottom","textTransform","label","fontSize","color","palette","type","fontWeight","overflowX","instruction","margin","opacity","up","saleTypeButton","borderRadius","backgroundColor","flexGrow","outline","border","cursor","saleTypeButtonSelected","actionButton","marginTop","feeLabel","feeValue","dialogRoot","fontFamily","top","right","position","dialogContent","background","default","borderLeft","borderRight","borderBottom","dialogButton","progress","step","alignItems","justifyContent","marginRight","minWidth","stepLabel","stepActive","stepCompleted","stepBar","left","backgroundImage","zIndex","stepBarFirstStepCompleted","stepBarCompleted","breakWord","wordBreak","SellDialog","rest","network","useSelector","getBlockchain","wallet","getWallet","tokenState","getTokens","exchangeInfo","getMarketplace","valueCalculators","useValueCalculators","match","useRouteMatch","useState","open","setOpen","expiry","setExpiry","useAsyncTask","runConfirmSell","loading","error","runGetNFTDetails","token","setToken","waitingForApprove","setWaitingForApprove","toaster","useToaster","saleType","sellToken","tokens","ZIL_ADDRESS","buyNowPrice","startingPrice","reservePrice","inputValues","setInputValues","hasApproved","setHasApproved","hasPosted","setHasPosted","history","useHistory","collectionId","params","collection","tokenId","isOwnToken","useMemo","owner","address","addressInfo","byte20","toLowerCase","useEffect","getNFTDetails","bypass","a","arkClient","ArkClient","fromBech32Address","viewerAddress","toLocaleLowerCase","getNftToken","result","model","onCurrencyChange","onPriceChange","rawAmount","onEndEditPrice","bidAmount","BigNumber","decimalPlaces","decimals","isNaN","isNegative","isFinite","sellUsdValue","BN_ZERO","input","bnOrZero","shiftedBy","usd","toString","Container","cls","Typography","variant","InputLabel","shrink","focused","FormHelperText","amount","tokenList","hideBalance","onEditorBlur","onAmountChange","value","align","toHumanNumber","onExpiryChange","expiryBlock","baseFeeBps","royaltyBps","message","disabled","gt","onClick","provider","priceAmount","price","bestAsk","gte","priceToken","existingPriceHuman","Error","toFormat","symbol","totalFeeBps","plus","feeAmount","times","dividedToIntegerBy","walletAddress","hexTokenAddress","approveAllowanceIfRequired","ZilswapConnector","getSDK","transaction","hash","waitForTx","nonce","Math","random","arkMessage","arkChequeHash","side","sign","signature","publicKey","postTrade","collectionAddress","logger","push","walletRequired","dialog","header","onClose","DialogContent","CircularProgress","_interopRequireDefault","require","_interopRequireWildcard","defineProperty","exports","React","_default","createElement","SvgCheckedIcon","_path3","SvgWarning","_path4","_path5","_defs","bidStorageKey","LocalStorageKeys","ArkBidAcceptTerms","initialFormState","acceptTerms","getLocalStored","backdrop","overflow","overflowY","hexToRGBA","backgroundClip","bidContainer","expandedCurrencyInput","paddingBottom","bestBid","text","primary","bestBidLabel","bestBidTokenLogo","collectionButton","radioButton","termsBox","priceBox","currencyInput","priceText","lineHeight","dark","currencyLogo","txText","icon","link","linkIcon","verticalAlign","loadingTitle","linHeight","loadingBody","errorBox","minHeight","warningIcon","infoBox","BidDialog","onComplete","dispatch","useDispatch","observingTxs","getTransactions","state","layout","showBidNftDialog","runConfirmPurchase","setPurchaseError","waitWrapComplete","completeWrapPending","wrapCompleteError","setWrapCompleteError","runWrapTx","loadingWrapTx","wrapError","setWrapError","completedPurchase","setCompletedPurchase","formState","setFormState","ZWAP_TOKEN_CONTRACT","bidToken","setBidToken","pendingTxHash","setPendingTxHash","runApproveTx","loadingApproveTx","approveError","clearApproveError","txIsPending","findIndex","tx","wrappingRequired","isWzil","balance","lt","isBidEnabled","isLessThanOrEqualTo","showTxApprove","isZil","tokenProxyAddr","tokenProxyAddress","unitlessInAmount","approved","allowances","isZero","comparedTo","bestBidToken","toBech32Address","bestBidAmount","clearErrors","waitForWrapComplete","txId","actions","Layout","toggleShowBidNftDialog","inputClassName","dialogOpts","zrc2Only","currency","FormControlLabel","control","Checkbox","checkedIcon","checked","onChange","localStorage","removeItem","setItem","JSON","stringify","disableRipple","Link","rel","href","wzilBalance","zilBalance","wrapAmount","minus","zilswap","wrapZil","observeTx","deadline","Number","MAX_SAFE_INTEGER","loadingTxApprove","onClickTxApprove","tokenAddress","tokenAmount","approveTokenTransfer","tokenID","spenderAddress","observedTx","walletObservedTx","bech32","Transaction","observe","SvgChainlink","x1","y1","x2","y2","gradientUnits","stopColor","offset","buyStorageKey","ArkBuyAcceptTerms","completedBox","shareText","BuyDialog","txState","showBuyNftDialog","confirmPurchaseError","errorApproveTx","waitForComplete","completePending","waitCompleteError","clearWaitCompleteError","setAcceptTerms","purchaseTxHash","setPurchaseTxHash","approveTxHash","setApproveTxHash","priceHuman","waitForPurchaseComplete","confirmedTx","success","isConfirmed","isRejected","dialogHeader","undefined","toggleShowBuyNftDialog","hideCloseButton","titlePadding","mt","underline","truncate","currentBlock","getCurrentBlock","buyCheque","executeTrade","sellCheque","nftAddress","execTradeResult","fullWidth","Backdrop","loader","CancelDialog","sellCheques","setSellCheques","cancelledCheques","setCancelledCheques","runQueryAsks","loadingQueryAsks","runCancelSell","clearError","showCancelSellNftDialog","onCloseDialog","toggleShowCancelSellNftDialog","listNftCheques","initiatorAddress","isActive","limit","queryResult","entries","cancelSellCheques","cancelTxs","cheque","chequeHash","replace","voidCheque","voidChequeResult","MarketPlace","listenPendingTx","txHash","clsx","size","secondary","imageContainer","imageHeight","paddingTop","image","boxShadow","shadows","objectFit","socialLinkGroup","NftImage","rounded","altName","asset","filename","imageUrl","url","imageType","style","PriceType","content","infoIcon","topLabel","bottomLabel","textAlign","InfoBox","tooltip","saleInfo","secondaryInfo","secondaryText","tokenLogo","PrimaryPrice","data","blockTime","prices","valueCalculator","timeLeft","LastTrade","blocksLeft","expiryTime","add","BLOCKS_PER_MINUTE","isAfter","dayjs","fromNow","priceValue","toUpperCase","mr","toSignificantNumber","component","whiteSpace","SecondaryPrice","hexSymbol","buttonBox","transform","button","bidButton","darken","buyButton","collectionName","letterSpacing","infoBoxContainer","saleInfoContainer","rarityLabel","WebkitTextStroke","menuButton","noPadding","verifiedBadge","alignSelf","SalesDetail","tokenUpdatedCallback","isCancelling","useNetwork","useBlockTime","runResyncMetadata","priceInfos","primaryPrice","BestAsk","BestBid","lastTrade","secondaryPrice1","name","verifiedAt","IconButton","resyncMetadata","status","onZap","secondaryPrice2","overlap","containerClass","bodyRow","emptyState","TraitTable","collections","collectionTraits","runGetCollectionTraits","currentCollectionTraits","total","tokenStat","tokenCount","getCollectionTraits","res","updateCollectionTraits","getPercent","c","count","lte","percent","div","TableContainer","Table","TableHead","TableRow","map","head","index","TableCell","TableBody","traitValues","sort","b","traitType","trait","localeCompare","colSpan","breadcrumbs","breadcrumb","imageInfoContainer","nftImage","mainInfoBox","paddingLeft","bidsHeader","halfOpacity","contrastText","aboutContainer","aboutHeader","aboutText","traitContainer","aboutMenuItem","extend","aboutItemText","avatar","aboutNameText","textOverflow","xsColumn","smColumn","comingSoon","NftView","bidsTable","pendingTxs","runGetBids","setOwner","runGetOwner","currentTab","setCurrentTab","royaltiesPercent","getData","onCancelListing","txs","Promise","all","resolve","setTimeout","getBids","updateBidsTable","bids","getProfile","ownerResult","values","find","path","ownerAddr","tryGetBech32Address","linkPath","disableGutters","MenuItem","to","ListItemIcon","Avatar","alt","src","profileImage","user","ownerName","Badge","anchorOrigin","vertical","horizontal","badgeContent","sizes","tab","tabHeaders","showItem"],"mappings":"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","file":"static/js/7.97256c30.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Box, makeStyles } from \"@material-ui/core\";\r\nimport { AppTheme } from \"app/theme/types\";\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    flex: 1,\r\n    padding: theme.spacing(8, 0, 2),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      padding: theme.spacing(6, 0, 2),\r\n    },\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      padding: theme.spacing(6, 2, 2),\r\n    },\r\n  },\r\n}));\r\n\r\nconst ArkPage: React.FC<React.HTMLAttributes<HTMLDivElement>> = (\r\n  props: any\r\n) => {\r\n  const { children } = props;\r\n  const classes = useStyles();\r\n\r\n  return <Box className={classes.root}>{children}</Box>;\r\n};\r\n\r\nexport default ArkPage;\r\n","var _path, _ellipse, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVerifiedBadge(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23 12L20.56 9.21L20.9 5.52L17.29 4.7L15.4 1.5L12 2.96L8.6 1.5L6.71 4.69L3.1 5.5L3.44 9.2L1 12L3.44 14.79L3.1 18.49L6.71 19.31L8.6 22.5L12 21.03L15.4 22.49L17.29 19.3L20.9 18.48L20.56 14.79L23 12ZM9.38 16.01L7 13.61C6.61 13.22 6.61 12.59 7 12.2L7.07 12.13C7.46 11.74 8.1 11.74 8.49 12.13L10.1 13.75L15.25 8.59C15.64 8.2 16.28 8.2 16.67 8.59L16.74 8.66C17.13 9.05 17.13 9.68 16.74 10.07L10.82 16.01C10.41 16.4 9.78 16.4 9.38 16.01Z\",\n    fill: \"#00FFB0\"\n  })), _ellipse || (_ellipse = /*#__PURE__*/React.createElement(\"ellipse\", {\n    cx: 11.5,\n    cy: 11.5,\n    rx: 7.5,\n    ry: 6.5,\n    fill: \"#00FFB0\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.1671 19.5H10.3338L11.1671 13.6667H8.25042C7.76709 13.6667 7.77542 13.4 7.93375 13.1167C8.09209 12.8333 7.97542 13.05 7.99209 13.0167C9.06709 11.1167 10.6838 8.28333 12.8338 4.5H13.6671L12.8338 10.3333H15.7504C16.1588 10.3333 16.2171 10.6083 16.1421 10.7583L16.0838 10.8833C12.8004 16.625 11.1671 19.5 11.1671 19.5Z\",\n    fill: \"#003340\",\n    fillOpacity: 0.5\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgVerifiedBadge);\nexport default __webpack_public_path__ + \"static/media/verified-badge.fe0d4899.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCheckmark(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.6663 5L7.49967 14.1667L3.33301 10\",\n    stroke: \"black\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCheckmark);\nexport default __webpack_public_path__ + \"static/media/checkmark.5e449094.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect, useMemo } from \"react\";\r\nimport { Box, Container, FormHelperText, InputLabel, Typography, DialogContent, CircularProgress } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { fromBech32Address } from \"@zilliqa-js/zilliqa\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport cls from \"classnames\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory, useRouteMatch } from \"react-router\";\r\nimport { BN_ZERO } from \"tradehub-api-js/build/main/lib/tradehub/utils\";\r\nimport { ArkExpiry, ArkNFTCard, CurrencyInput, DialogModal, FancyButton, Text } from \"app/components\";\r\nimport ArkPage from \"app/layouts/ArkPage\";\r\nimport { getBlockchain, getWallet, getTokens, getMarketplace } from \"app/saga/selectors\";\r\nimport { Nft, TokenInfo } from \"app/store/types\";\r\nimport { AppTheme } from \"app/theme/types\";\r\nimport { useAsyncTask, bnOrZero, useToaster, useValueCalculators, toHumanNumber } from \"app/utils\";\r\nimport { ArkClient, logger, waitForTx } from \"core/utilities\";\r\nimport { ZilswapConnector } from \"core/zilswap\";\r\nimport { ZIL_ADDRESS } from \"app/utils/constants\";\r\nimport { ReactComponent as Checkmark } from \"./checkmark.svg\";\r\n\r\ninterface SellForm {\r\n  description: string,\r\n  saleType: \"fixed_price\" | \"timed_auction\",\r\n  sellToken: TokenInfo,\r\n  buyNowPrice: string,\r\n  startingPrice: string,\r\n  reservePrice: string,\r\n};\r\n\r\nconst SellDialog: React.FC<React.HTMLAttributes<HTMLDivElement>> = (props: any) => {\r\n  const { className, ...rest } = props;\r\n  const classes = useStyles();\r\n  const { network } = useSelector(getBlockchain);\r\n  const { wallet } = useSelector(getWallet);\r\n  const tokenState = useSelector(getTokens);\r\n  const { exchangeInfo } = useSelector(getMarketplace);\r\n  const valueCalculators = useValueCalculators();\r\n  const match = useRouteMatch<{ id: string, collection: string }>();\r\n  const [open, setOpen] = useState(false)\r\n  const [expiry, setExpiry] = useState(0)\r\n  const [runConfirmSell, loading, error] = useAsyncTask(\"confirmSell\", () => setOpen(false));\r\n  const [runGetNFTDetails] = useAsyncTask(\"runGetNFTDetails\");\r\n  const [token, setToken] = useState<Nft>();\r\n  const [waitingForApprove, setWaitingForApprove] = useState(false);\r\n  const toaster = useToaster();\r\n  // const [errors, setErrors] = useState({\r\n  //   description: \"\",\r\n  // })\r\n  const [inputValues, setInputValues] = useState<SellForm>({\r\n    description: \"\",\r\n    saleType: \"fixed_price\",\r\n    sellToken: tokenState.tokens[ZIL_ADDRESS],\r\n    buyNowPrice: \"0\",\r\n    startingPrice: \"0\",\r\n    reservePrice: \"0\",\r\n  });\r\n  const [hasApproved, setHasApproved] = useState(false)\r\n  const [hasPosted, setHasPosted] = useState(false)\r\n  const history = useHistory()\r\n\r\n  const collectionId = match.params.collection;\r\n  const tokenId = match.params.id;\r\n\r\n  const isOwnToken = useMemo(() => {\r\n    return token?.owner?.address && wallet?.addressInfo.byte20?.toLowerCase() === token?.owner?.address;\r\n  }, [token, wallet?.addressInfo]);\r\n\r\n  useEffect(() => {\r\n    if (wallet) {\r\n      getNFTDetails();\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [wallet])\r\n\r\n  const getNFTDetails = (bypass?: boolean) => {\r\n    runGetNFTDetails(async () => {\r\n      const arkClient = new ArkClient(network);\r\n      const address = fromBech32Address(collectionId).toLowerCase()\r\n      const viewerAddress = wallet?.addressInfo.byte20.toLocaleLowerCase()\r\n      const { result } = await arkClient.getNftToken(address, tokenId, viewerAddress);\r\n      setToken(result.model);\r\n    })\r\n  }\r\n\r\n  // const updateInputs = (type: string) => {\r\n  //   return (newInput: string) => {\r\n  //     setInputValues({\r\n  //       ...inputValues,\r\n  //       [type]: newInput\r\n  //     })\r\n  //     if (!newInput) {\r\n  //       return setErrors({\r\n  //         ...errors, [type]: \"\"\r\n  //       })\r\n  //     }\r\n  //     const errorText = validateInput(type, newInput)\r\n\r\n  //     setErrors({\r\n  //       ...errors, [type]: errorText\r\n  //     })\r\n  //   }\r\n  // }\r\n\r\n  // const validateInput = (type: string, input: string) => {\r\n  //   switch (type) {\r\n  //     case \"description\":\r\n  //       if (input.length > 300) return \"max 300 characters\";\r\n  //       return \"\"\r\n  //     default: return \"false\";\r\n  //   }\r\n  // }\r\n\r\n  const onCurrencyChange = (token: TokenInfo) => {\r\n    setInputValues({\r\n      ...inputValues,\r\n      sellToken: token\r\n    })\r\n  };\r\n\r\n  const onPriceChange = (type: string, rawAmount: string = \"0\") => {\r\n    setInputValues({\r\n      ...inputValues,\r\n      [type]: rawAmount\r\n    })\r\n  };\r\n\r\n  const onEndEditPrice = (type: keyof Pick<SellForm, \"buyNowPrice\" | \"reservePrice\" | \"startingPrice\">) => {\r\n    let bidAmount = new BigNumber(inputValues[type]).decimalPlaces(\r\n      inputValues.sellToken?.decimals ?? 0\r\n    );\r\n    if (bidAmount.isNaN() || bidAmount.isNegative() || !bidAmount.isFinite())\r\n      setInputValues({\r\n        ...inputValues,\r\n        [type]: \"0\"\r\n      })\r\n  };\r\n\r\n  const onExpiryChange = (expiryBlock: number) => {\r\n    setExpiry(expiryBlock)\r\n  }\r\n\r\n  const onCloseDialog = () => {\r\n    if (loading) return;\r\n    setOpen(false);\r\n  };\r\n\r\n  const onConfirm = () => {\r\n    if (!wallet?.provider || !match.params?.collection || !match.params?.id || !inputValues.sellToken || inputValues.buyNowPrice === \"0\" || !exchangeInfo) return;\r\n    runConfirmSell(async () => {\r\n      const { collection: address, id } = match.params;\r\n\r\n      const priceAmount = new BigNumber(inputValues.buyNowPrice).shiftedBy(inputValues.sellToken.decimals);\r\n      const price = { amount: priceAmount, address: fromBech32Address(inputValues.sellToken.address) };\r\n\r\n      if (price.address === token?.bestAsk?.price.address && price.amount.gte(token.bestAsk.price.amount)) {\r\n        const priceToken = tokenState.tokens[inputValues.sellToken.address];\r\n        const decimals = priceToken?.decimals ?? 0;\r\n        const existingPriceHuman = bnOrZero(token.bestAsk.price.amount).decimalPlaces(0).shiftedBy(-decimals);\r\n        throw new Error(`Selling price should be lower than existing price of ${existingPriceHuman.toFormat()} ${priceToken?.symbol}`)\r\n      }\r\n\r\n      if (typeof token?.collection?.royaltyBps !== \"number\")\r\n        throw new Error(\"Could not retrieve collection information\");\r\n\r\n      const totalFeeBps = bnOrZero(exchangeInfo.baseFeeBps).plus(token.collection.royaltyBps);\r\n      const feeAmount = priceAmount.times(totalFeeBps).dividedToIntegerBy(10000).plus(1);\r\n\r\n      setOpen(true)\r\n      const arkClient = new ArkClient(network);\r\n\r\n      const walletAddress = wallet.addressInfo.byte20.toLowerCase();\r\n      const hexTokenAddress = fromBech32Address(address).toLowerCase();\r\n      const transaction = await arkClient.approveAllowanceIfRequired(hexTokenAddress, walletAddress, ZilswapConnector.getSDK());\r\n\r\n      if (transaction?.id) {\r\n        toaster(\"Approve TX Submitted\", { hash: transaction.id });\r\n        setWaitingForApprove(true);\r\n\r\n        try {\r\n          await waitForTx(transaction.id);\r\n          setHasApproved(true);\r\n        } finally {\r\n          setWaitingForApprove(false);\r\n        }\r\n      }\r\n\r\n      const nonce = new BigNumber(Math.random()).times(2147483647).decimalPlaces(0).toString(10); // int32 max 2147483647\r\n      const message = arkClient.arkMessage(\"Execute\", arkClient.arkChequeHash({\r\n        side: \"Sell\",\r\n        token: { address, id, },\r\n        price,\r\n        feeAmount,\r\n        expiry,\r\n        nonce,\r\n      }))\r\n\r\n      const { signature, publicKey } = (await wallet.provider!.wallet.sign(message as any)) as any\r\n\r\n      const result = await arkClient.postTrade({\r\n        publicKey,\r\n        signature,\r\n\r\n        collectionAddress: address,\r\n        address: wallet.addressInfo.byte20.toLowerCase(),\r\n        tokenId: id,\r\n        side: \"Sell\",\r\n        expiry,\r\n        nonce,\r\n        price,\r\n      });\r\n\r\n      logger(\"post trade\", result);\r\n      setHasPosted(true);\r\n      toaster(`Successfully listed token #${id}!`);\r\n      history.push(`/arky/collections/${collectionId}/${tokenId}`)\r\n    });\r\n  };\r\n\r\n  const sellUsdValue = useMemo(() => {\r\n    if (!inputValues.sellToken) return BN_ZERO;\r\n    const input = bnOrZero(inputValues.buyNowPrice).shiftedBy(inputValues.sellToken.decimals);\r\n\r\n    return valueCalculators.usd(tokenState, inputValues.sellToken.address, input.toString(10));\r\n  }, [inputValues, valueCalculators, tokenState])\r\n\r\n  if (!isOwnToken) {\r\n    return <></>\r\n  }\r\n\r\n  return (\r\n    <ArkPage {...rest}>\r\n      <Container className={cls(classes.root, className)}>\r\n        <Box className={classes.container}>\r\n          <Box justifyContent=\"flex-start\" marginBottom={4}>\r\n            <Typography variant=\"h1\">Sell</Typography>\r\n          </Box>\r\n          <Box className={classes.contentBox}>\r\n            <Box>\r\n              {/* <Box className={classes.description}>\r\n                <ArkInput\r\n                  placeholder=\"eg. This NFT was owned by an NBA player\" error={errors.description} value={inputValues.description}\r\n                  label=\"Additional description\" onValueChange={(value) => updateInputs(\"description\")(value)} multiline={true}\r\n                />\r\n              </Box> */}\r\n\r\n              {/* <Box display=\"flex\" flexDirection=\"column\" marginTop={2}>\r\n                <InputLabel shrink focused={false} className={cls({ [classes.label]: true })}>\r\n                  Sell type\r\n                </InputLabel>\r\n                <FormHelperText className={classes.instruction}>By default, all Fixed Price listings are set to open to bids.</FormHelperText>\r\n                <Box display=\"grid\" gridTemplateColumns=\"repeat(2, minmax(0, 1fr))\" gridGap={8} marginTop={1}>\r\n                  <button\r\n                    className={cls(classes.saleTypeButton, {\r\n                      [classes.saleTypeButtonSelected]: inputValues.saleType === \"fixed_price\"\r\n                    })}\r\n                    onClick={() => setInputValues({\r\n                      ...inputValues,\r\n                      saleType: \"fixed_price\"\r\n                    })}\r\n                  >Fixed Price</button>\r\n                  <button\r\n                    className={cls(classes.saleTypeButton, {\r\n                      [classes.saleTypeButtonSelected]: inputValues.saleType === \"timed_auction\"\r\n                    })}\r\n                    onClick={() => setInputValues({\r\n                      ...inputValues,\r\n                      saleType: \"timed_auction\"\r\n                    })}\r\n                  >Timed Auction</button>\r\n                </Box>\r\n              </Box> */}\r\n\r\n              {inputValues.saleType === \"fixed_price\" &&\r\n                <Box display=\"flex\" flexDirection=\"column\" marginTop={2}>\r\n                  <InputLabel shrink focused={false} className={cls({ [classes.label]: true })}>\r\n                    Buy Now Price\r\n                  </InputLabel>\r\n                  <FormHelperText className={classes.instruction}>Transactions will be made automatically once the buyer hits \"Confirm\".</FormHelperText>\r\n                  <Box marginTop={1}>\r\n                    <CurrencyInput\r\n                      token={inputValues.sellToken ?? null}\r\n                      amount={inputValues.buyNowPrice}\r\n                      tokenList=\"ark-zil\"\r\n                      hideBalance\r\n                      onEditorBlur={() => onEndEditPrice('buyNowPrice')}\r\n                      onAmountChange={value => onPriceChange('buyNowPrice', value)}\r\n                      onCurrencyChange={onCurrencyChange}\r\n                    />\r\n                  </Box>\r\n                  <Text variant=\"body2\" align=\"left\" marginTop={1} marginLeft={2}>\r\n                     ${toHumanNumber(sellUsdValue, 2)}\r\n                  </Text>\r\n                </Box>\r\n              }\r\n\r\n              {inputValues.saleType === \"timed_auction\" &&\r\n                <>\r\n                  <Box display=\"flex\" flexDirection=\"column\" marginTop={4}>\r\n                    <InputLabel shrink focused={false} className={cls({ [classes.label]: true })}>\r\n                      Starting Price\r\n                    </InputLabel>\r\n                    <FormHelperText className={classes.instruction}>Set a minimum bid XXXXXXXXX</FormHelperText>\r\n                    <Box marginTop={1}>\r\n                      <CurrencyInput\r\n                        token={inputValues.sellToken ?? null}\r\n                        amount={inputValues.buyNowPrice}\r\n                        onEditorBlur={() => onEndEditPrice('startingPrice')}\r\n                        onAmountChange={value => onPriceChange('startingPrice', value)}\r\n                        onCurrencyChange={onCurrencyChange}\r\n                      />\r\n                    </Box>\r\n                  </Box>\r\n\r\n                  <Box display=\"flex\" flexDirection=\"column\" marginTop={4}>\r\n                    <InputLabel shrink focused={false} className={cls({ [classes.label]: true })}>\r\n                      Reserve Price\r\n                    </InputLabel>\r\n                    <FormHelperText className={classes.instruction}>If no bid hits the reserve price, your auction will close without a sale.</FormHelperText>\r\n                    <Box marginTop={1}>\r\n                      <CurrencyInput\r\n                        label=\"Reserve Price\"\r\n                        token={inputValues.sellToken ?? null}\r\n                        amount={inputValues.buyNowPrice}\r\n                        onEditorBlur={() => onEndEditPrice('reservePrice')}\r\n                        onAmountChange={value => onPriceChange('reservePrice', value)}\r\n                        onCurrencyChange={onCurrencyChange}\r\n                      />\r\n                    </Box>\r\n                  </Box>\r\n\r\n                  <Box display=\"flex\" flexDirection=\"column\" marginTop={4}>\r\n                    <InputLabel shrink focused={false} className={cls({ [classes.label]: true })}>\r\n                      End Auction On\r\n                    </InputLabel>\r\n                    <FormHelperText className={classes.instruction}>Choose when to end your timed auction.</FormHelperText>\r\n                  </Box>\r\n                </>\r\n              }\r\n\r\n              <ArkExpiry label=\"Offer Expiry\" onExpiryChange={onExpiryChange} />\r\n\r\n              <Box display=\"flex\" flexDirection=\"column\" marginTop={4}>\r\n                <InputLabel shrink focused={false} className={cls({ [classes.label]: true })}>\r\n                  Fees\r\n                </InputLabel>\r\n                <FormHelperText className={classes.instruction}>The following fees will be deducted once this NFT is sold.</FormHelperText>\r\n                {exchangeInfo?.baseFeeBps && (\r\n                  <Box display=\"flex\" marginTop={1}>\r\n                    <Typography className={classes.feeLabel}>Service Fee</Typography>\r\n                    <Typography className={classes.feeValue}>{exchangeInfo.baseFeeBps / 100}%</Typography>\r\n                  </Box>\r\n                )}\r\n                {token?.collection && token.collection.royaltyBps !== null &&\r\n                  <Box display=\"flex\" marginTop={1}>\r\n                    <Typography className={classes.feeLabel}>Royalties</Typography>\r\n                    <Typography className={classes.feeValue}>{new BigNumber(token.collection.royaltyBps).shiftedBy(-2).toString()}%</Typography>\r\n                  </Box>\r\n                }\r\n              </Box>\r\n\r\n              {error && (\r\n                <Text marginTop={2} className={classes.breakWord} color=\"error\" >Error: {error?.message ?? \"Unknown error\"}</Text>\r\n              )}\r\n              <FancyButton\r\n                className={classes.actionButton}\r\n                loading={loading}\r\n                disabled={!new BigNumber(inputValues.buyNowPrice).gt(0)}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={onConfirm}\r\n                walletRequired\r\n              >\r\n                Sell NFT\r\n              </FancyButton>\r\n            </Box>\r\n            <Box className={classes.nftBox}>\r\n              {token &&\r\n                <ArkNFTCard\r\n                  className={classes.nftCard}\r\n                  token={token}\r\n                  collectionAddress={fromBech32Address(collectionId).toLowerCase()}\r\n                  dialog={true}\r\n                />\r\n              }\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n\r\n        <DialogModal\r\n          className={classes.dialogRoot}\r\n          header=\"Complete Listing\"\r\n          open={open}\r\n          onClose={onCloseDialog}\r\n        >\r\n          <DialogContent className={classes.dialogContent}>\r\n            <Box display=\"flex\" flexDirection=\"column\">\r\n              <Box display=\"flex\" alignItems=\"center\" marginBottom={4} position=\"relative\">\r\n                <Box className={cls(classes.stepBar, {\r\n                  [classes.stepBarFirstStepCompleted]: hasApproved,\r\n                  [classes.stepBarCompleted]: hasApproved && hasPosted\r\n                })}></Box>\r\n                <Box className={cls(classes.step, {\r\n                  [classes.stepActive]: !hasApproved,\r\n                  [classes.stepCompleted]: hasApproved\r\n                })}>\r\n                  {hasApproved ? (\r\n                    <Checkmark />\r\n                  ) : (\r\n                    <>1</>\r\n                  )}\r\n                  {waitingForApprove && (\r\n                    <CircularProgress className={classes.progress} color=\"inherit\" />\r\n                  )}\r\n                </Box>\r\n                <Box display=\"flex\" flexDirection=\"column\" alignItems=\"stretch\">\r\n                  <Text className={classes.stepLabel}>Approve Token</Text>\r\n                  <Text>Approve once, and never again. This step approves the token for trading and involves a one-off gas fee.</Text>\r\n                </Box>\r\n              </Box>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Box className={cls(classes.step, {\r\n                  [classes.stepActive]: !hasPosted && hasApproved,\r\n                  [classes.stepCompleted]: hasPosted\r\n                })}>\r\n                  {hasPosted ? (\r\n                    <Checkmark />\r\n                  ) : (\r\n                    <>2</>\r\n                  )}\r\n                </Box>\r\n                <Box display=\"flex\" flexDirection=\"column\" alignItems=\"stretch\">\r\n                  <Text className={classes.stepLabel}>Confirm Listing</Text>\r\n                  <Text>Accept the signature request on your wallet so that we can begin processing your request.</Text>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          </DialogContent>\r\n        </DialogModal>\r\n      </Container>\r\n    </ArkPage>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      padding: 0\r\n    },\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  container: {\r\n    maxWidth: \"680px\",\r\n    width: \"100%\",\r\n    display: \"row\",\r\n  },\r\n  contentBox: {\r\n    display: \"flex\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"100%\",\r\n      flexDirection: \"column-reverse\"\r\n    }\r\n  },\r\n  nftBox: {\r\n    marginLeft: theme.spacing(6),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"100%\",\r\n      marginLeft: 0,\r\n    }\r\n  },\r\n  nftCard: {\r\n    maxWidth: \"none\",\r\n  },\r\n  description: {\r\n    \"& .MuiTypography-root\": {\r\n      marginBottom: 6,\r\n      textTransform: \"uppercase\"\r\n    },\r\n    \"& .MuiInputBase-input\": {\r\n      height: \"80px !important\"\r\n    }\r\n  },\r\n  label: {\r\n    fontSize: \"18px\",\r\n    color: theme.palette.type === \"dark\" ? \"#DEFFFF\" : \"#0D1B24\",\r\n    fontWeight: \"bold\",\r\n    width: 150,\r\n    overflowX: \"visible\",\r\n    textTransform: \"uppercase\",\r\n    marginBottom: 1,\r\n  },\r\n  instruction: {\r\n    color: theme.palette.type === \"dark\" ? \"#DEFFFF\" : \"#0D1B24\",\r\n    fontSize: 12,\r\n    margin: 0,\r\n    opacity: 0.5,\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: 400,\r\n    }\r\n  },\r\n  saleTypeButton: {\r\n    padding: 20,\r\n    borderRadius: 12,\r\n    backgroundColor: \"rgba(255,255,255,0.1)\",\r\n    flexGrow: 1,\r\n    outline: \"none\",\r\n    border: \"none\",\r\n    color: theme.palette.type === \"dark\" ? \"#DEFFFF\" : \"#0D1B24\",\r\n    fontWeight: \"bold\",\r\n    cursor: \"pointer\"\r\n  },\r\n  saleTypeButtonSelected: {\r\n    backgroundColor: \"#00FFB0\",\r\n    color: \"#003340\",\r\n  },\r\n  actionButton: {\r\n    height: 58,\r\n    marginTop: 24\r\n  },\r\n  feeLabel: {\r\n    fontWeight: \"bold\",\r\n    flexGrow: 1,\r\n    fontSize: \"14px\"\r\n  },\r\n  feeValue: {\r\n    fontWeight: \"bold\",\r\n    fontSize: \"14px\"\r\n  },\r\n  dialogRoot: {\r\n    \"& .MuiDialogTitle-root\": {\r\n      padding: theme.spacing(4.5, 4.5, 5),\r\n      \"& .MuiTypography-root\": {\r\n        fontFamily: \"'Raleway', sans-serif\",\r\n        fontWeight: 700,\r\n        fontSize: \"24px\",\r\n      },\r\n      \"& .MuiSvgIcon-root\": {\r\n        fontSize: \"1.8rem\",\r\n      },\r\n      \"& .MuiIconButton-root\": {\r\n        top: \"21px\",\r\n        right: \"21px\",\r\n      },\r\n    },\r\n    position: \"relative\",\r\n\r\n  },\r\n  dialogContent: {\r\n    backgroundColor: theme.palette.background.default,\r\n    borderLeft:\r\n      theme.palette.border,\r\n    borderRight:\r\n      theme.palette.border,\r\n    borderBottom:\r\n      theme.palette.border,\r\n    borderRadius: \"0 0 12px 12px\",\r\n    padding: theme.spacing(0, 4.5, 5),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: 436,\r\n    }\r\n  },\r\n  dialogButton: {\r\n    height: 42,\r\n    marginTop: 6\r\n  },\r\n  progress: {\r\n    position: \"absolute\",\r\n  },\r\n  step: {\r\n    width: 110,\r\n    height: 52,\r\n    borderRadius: 26,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"#223139\",\r\n    marginRight: 24,\r\n    position: \"relative\",\r\n    maxWidth: 54.5,\r\n    minWidth: 53.75,\r\n  },\r\n  stepLabel: {\r\n    fontWeight: \"bold\",\r\n    fontSize: 14,\r\n    marginBottom: 2\r\n  },\r\n  stepActive: {\r\n    backgroundColor: \"#6BE1FF\",\r\n    color: \"#003340\"\r\n  },\r\n  stepCompleted: {\r\n    backgroundColor: \"#00FFB0\",\r\n    color: \"#003340\"\r\n  },\r\n  stepBar: {\r\n    position: \"absolute\",\r\n    top: 50,\r\n    left: 25,\r\n    height: 44,\r\n    width: 6,\r\n    backgroundColor: \"#223139\",\r\n    backgroundImage: \"linear-gradient(#6BE1FF, #223139)\",\r\n    zIndex: 0,\r\n  },\r\n  stepBarFirstStepCompleted: {\r\n    backgroundImage: \"linear-gradient(#00FFB0, #6BE1FF)\",\r\n  },\r\n  stepBarCompleted: {\r\n    backgroundImage: \"linear-gradient(#00FFB0, #00FFB0)\",\r\n  },\r\n  breakWord: {\r\n    wordBreak: \"break-word\"\r\n  },\r\n}));\r\n\r\nexport default SellDialog;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18 19H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm1-16H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n}), 'CheckBoxOutlineBlankRounded');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n}), 'InfoOutlined');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\"\n}), 'Replay');\n\nexports.default = _default;","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCheckedIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15 15.8333H5C4.54167 15.8333 4.16667 15.4583 4.16667 15V5C4.16667 4.54167 4.54167 4.16667 5 4.16667H15C15.4583 4.16667 15.8333 4.54167 15.8333 5V15C15.8333 15.4583 15.4583 15.8333 15 15.8333ZM15.8333 2.5H4.16667C3.25 2.5 2.5 3.25 2.5 4.16667V15.8333C2.5 16.75 3.25 17.5 4.16667 17.5H15.8333C16.75 17.5 17.5 16.75 17.5 15.8333V4.16667C17.5 3.25 16.75 2.5 15.8333 2.5Z\",\n    fill: \"#DEFFFF\",\n    fillOpacity: 0.5\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.66699 7.66699C6.66699 7.11471 7.11471 6.66699 7.66699 6.66699H12.3337C12.8859 6.66699 13.3337 7.11471 13.3337 7.66699V12.3337C13.3337 12.8859 12.8859 13.3337 12.3337 13.3337H7.66699C7.11471 13.3337 6.66699 12.8859 6.66699 12.3337V7.66699Z\",\n    fill: \"#00FFB0\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCheckedIcon);\nexport default __webpack_public_path__ + \"static/media/checked-icon.fa2c0183.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgWarning(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.2908 3.8602L1.82075 18.0002C1.64612 18.3026 1.55372 18.6455 1.55274 18.9947C1.55176 19.3439 1.64224 19.6873 1.81518 19.9907C1.98812 20.2941 2.23748 20.547 2.53846 20.7241C2.83944 20.9012 3.18155 20.9964 3.53075 21.0002H20.4708C20.82 20.9964 21.1621 20.9012 21.463 20.7241C21.764 20.547 22.0134 20.2941 22.1863 19.9907C22.3593 19.6873 22.4497 19.3439 22.4488 18.9947C22.4478 18.6455 22.3554 18.3026 22.1808 18.0002L13.7108 3.8602C13.5325 3.56631 13.2815 3.32332 12.9819 3.15469C12.6824 2.98605 12.3445 2.89746 12.0008 2.89746C11.657 2.89746 11.3191 2.98605 11.0196 3.15469C10.72 3.32332 10.469 3.56631 10.2908 3.8602V3.8602Z\",\n    stroke: \"#FF5252\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 9V13\",\n    stroke: \"#FF5252\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 17H12.01\",\n    stroke: \"#FF5252\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgWarning);\nexport default __webpack_public_path__ + \"static/media/warning.b70134ab.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3, _path4, _path5, _defs;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgChainlink(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 113,\n    height: 21,\n    viewBox: \"0 0 113 21\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.4157 0.000733778L18.7463 0.000731755C24.5025 0.000731755 29.165 4.66318 29.1619 10.4164C29.1647 16.1699 24.5023 20.8323 18.7463 20.8321H10.4157C4.66217 20.8349 -0.00303916 16.1697 1.4855e-06 10.4164C-0.00275627 4.6629 4.66245 -0.00230686 10.4157 0.000733778ZM10.4157 4.16601C6.96303 4.16601 4.165 6.96404 4.165 10.4167C4.165 13.8694 6.96302 16.6674 10.4157 16.6674H18.7463C22.1989 16.6674 24.9969 13.8694 24.9969 10.4167C24.9969 6.96404 22.1989 4.16602 18.7463 4.16602L10.4157 4.16601Z\",\n    fill: \"url(#paint0_linear)\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M52.0799 0.000818734H60.416C66.1668 0.000818734 70.8291 4.6632 70.8317 10.4165C70.8289 16.17 66.1665 20.8325 60.416 20.8322H52.0799C46.3292 20.8322 41.6668 16.1698 41.6642 10.4165C41.667 4.66299 46.3294 0.000535844 52.0799 0.000818734ZM52.0799 4.1661C48.63 4.16886 45.832 6.96688 45.8292 10.4168C45.832 13.8667 48.63 16.6647 52.0799 16.6675H60.416C63.8659 16.6647 66.6639 13.8667 66.6667 10.4168C66.6639 6.96688 63.8659 4.16886 60.416 4.1661H52.0799Z\",\n    fill: \"url(#paint1_linear)\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M93.7487 7.23549e-09L102.079 1.35593e-06C107.833 -0.0027564 112.498 4.66245 112.495 10.4157C112.498 16.1692 107.832 20.8344 102.079 20.8314L93.7487 20.8314C87.9924 20.8314 83.33 16.1689 83.333 10.4157C83.3303 4.66217 87.9926 -0.000212076 93.7487 7.23549e-09ZM93.7487 4.16528C90.296 4.16528 87.498 6.9633 87.498 10.416C87.498 13.8686 90.296 16.6666 93.7487 16.6666L102.079 16.6666C105.532 16.6666 108.33 13.8686 108.33 10.416C108.33 6.9633 105.532 4.16528 102.079 4.16528L93.7487 4.16528Z\",\n    fill: \"url(#paint2_linear)\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.9133 12.4987L47.9138 12.5016C49.0656 12.4988 49.9964 11.568 49.9992 10.4162C49.9964 9.26434 49.0656 8.33351 47.9138 8.33075L22.9133 8.33358C21.7643 8.33358 20.8307 9.26717 20.8307 10.4162C20.8307 11.5653 21.7643 12.4987 22.9133 12.4987Z\",\n    fill: \"url(#paint3_linear)\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M64.5802 12.5015L89.5807 12.4986C90.7297 12.4986 91.6633 11.565 91.6633 10.416C91.6633 9.26693 90.7297 8.33334 89.5807 8.33334L64.5802 8.33051C63.4284 8.33328 62.4976 9.2641 62.4948 10.4159C62.4976 11.5677 63.4284 12.4987 64.5802 12.5015Z\",\n    fill: \"url(#paint4_linear)\"\n  })), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"paint0_linear\",\n    x1: 112.683,\n    y1: 10.5176,\n    x2: -0.317383,\n    y2: 10.5176,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"white\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.494792,\n    stopColor: \"#E2FFFF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#9CFFFF\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"paint1_linear\",\n    x1: 112.683,\n    y1: 10.5176,\n    x2: -0.317383,\n    y2: 10.5176,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"white\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.494792,\n    stopColor: \"#E2FFFF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#9CFFFF\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"paint2_linear\",\n    x1: 112.683,\n    y1: 10.5176,\n    x2: -0.317383,\n    y2: 10.5176,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"white\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.494792,\n    stopColor: \"#E2FFFF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#9CFFFF\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"paint3_linear\",\n    x1: 112.683,\n    y1: 10.5176,\n    x2: -0.317383,\n    y2: 10.5176,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"white\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.494792,\n    stopColor: \"#E2FFFF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#9CFFFF\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"paint4_linear\",\n    x1: 112.683,\n    y1: 10.5176,\n    x2: -0.317383,\n    y2: 10.5176,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"white\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.494792,\n    stopColor: \"#E2FFFF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#9CFFFF\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgChainlink);\nexport default __webpack_public_path__ + \"static/media/chainlink.e795fe46.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Fragment, useMemo, useState } from \"react\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useRouteMatch } from \"react-router\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { bnOrZero } from \"tradehub-api-js/build/main/lib/tradehub/utils\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport cls from \"classnames\";\r\nimport { Box, Checkbox, DialogContent, DialogProps, FormControlLabel, Link } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport UncheckedIcon from \"@material-ui/icons/CheckBoxOutlineBlankRounded\";\r\nimport { ZilswapConnector } from \"core/zilswap\";\r\nimport { ArkExpiry, ArkNFTCard, CurrencyInput, CurrencyLogo, DialogModal, FancyButton, Text } from \"app/components\";\r\nimport { getBlockchain, getMarketplace, getTokens, getTransactions, getWallet } from \"app/saga/selectors\";\r\nimport { actions } from \"app/store\";\r\nimport { Nft } from \"app/store/marketplace/types\";\r\nimport { RootState, TokenInfo, WalletObservedTx } from \"app/store/types\";\r\nimport { AppTheme } from \"app/theme/types\";\r\nimport { hexToRGBA, toHumanNumber, useAsyncTask, useToaster, getLocalStored } from \"app/utils\";\r\nimport { LocalStorageKeys } from \"app/utils/constants\";\r\nimport { ReactComponent as CheckedIcon } from \"app/views/ark/Collections/checked-icon.svg\";\r\nimport { ArkClient, logger, waitForTx } from \"core/utilities\";\r\nimport { fromBech32Address, toBech32Address } from \"core/zilswap\";\r\nimport { ZWAP_TOKEN_CONTRACT } from \"core/zilswap/constants\";\r\nimport { ZIL_ADDRESS } from \"app/utils/constants\";\r\nimport { ReactComponent as WarningIcon } from \"../assets/warning.svg\";\r\n\r\ninterface Props extends Partial<DialogProps> {\r\n  token: Nft;\r\n  collectionAddress: string;\r\n  onComplete?: () => void;\r\n}\r\n\r\nconst bidStorageKey = LocalStorageKeys.ArkBidAcceptTerms\r\n\r\nconst initialFormState = {\r\n  bidAmount: \"0\",\r\n  acceptTerms: !!getLocalStored(bidStorageKey),\r\n};\r\n\r\nconst BidDialog: React.FC<Props> = (props: Props) => {\r\n  const { children, className, collectionAddress, token, onComplete, ...rest } = props;\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { network } = useSelector(getBlockchain);\r\n  const { wallet } = useSelector(getWallet);\r\n  const tokenState = useSelector(getTokens);\r\n  const { observingTxs } = useSelector(getTransactions);\r\n  const { exchangeInfo } = useSelector(getMarketplace);\r\n  const open = useSelector<RootState, boolean>(\r\n    (state) => state.layout.showBidNftDialog\r\n  );\r\n  const [runConfirmPurchase, loading, error, setPurchaseError] = useAsyncTask(\"confirmPurchase\");\r\n  const [waitWrapComplete, completeWrapPending, wrapCompleteError, setWrapCompleteError] = useAsyncTask(\"waitForWrapComplete\");\r\n  const [runWrapTx, loadingWrapTx, wrapError, setWrapError] = useAsyncTask(\"wrapZil\");\r\n  const [completedPurchase, setCompletedPurchase] = useState<boolean>(false);\r\n  const [expiry, setExpiry] = useState<number>(0);\r\n  const [formState, setFormState] =\r\n    useState<typeof initialFormState>(initialFormState);\r\n  const [bidToken, setBidToken] = useState<TokenInfo>(\r\n    tokenState.tokens[ZWAP_TOKEN_CONTRACT[network]]\r\n  );\r\n  const [pendingTxHash, setPendingTxHash] = useState<string | null>(null);\r\n  const match = useRouteMatch<{ id: string; collection: string }>();\r\n  const [runApproveTx, loadingApproveTx, approveError, clearApproveError] = useAsyncTask(\"approveTx\");\r\n  const toaster = useToaster();\r\n\r\n  const bestBid = token.bestBid;\r\n  const txIsPending = loadingApproveTx || observingTxs.findIndex(tx => tx.hash.toLowerCase() === pendingTxHash) >= 0;\r\n\r\n  const wrappingRequired = bidToken && bidToken.isWzil &&\r\n    (bnOrZero(bidToken.balance).lt(\r\n      bnOrZero(formState.bidAmount).shiftedBy(bidToken.decimals)\r\n    ))\r\n\r\n  const isBidEnabled = useMemo(() => {\r\n    if (!formState.acceptTerms) return false;\r\n\r\n    if (bnOrZero(formState.bidAmount).isLessThanOrEqualTo(0)) return false;\r\n\r\n    if (!bidToken) return false;\r\n\r\n    return true;\r\n\r\n    // eslint-disable-next-line\r\n  }, [formState, bidToken]);\r\n\r\n  const showTxApprove = useMemo(() => {\r\n    if (!bidToken || bidToken.isZil) return false;\r\n    setBidToken(tokenState.tokens[bidToken.address]);\r\n    const arkClient = new ArkClient(network);\r\n    const tokenProxyAddr = arkClient.tokenProxyAddress;\r\n\r\n    const priceAmount = bnOrZero(formState.bidAmount);\r\n    const unitlessInAmount = priceAmount.shiftedBy(bidToken.decimals);\r\n    const approved = bnOrZero(bidToken.allowances![tokenProxyAddr] || '0')\r\n    const showTxApprove = approved.isZero() || approved.comparedTo(unitlessInAmount) < 0;\r\n\r\n    return showTxApprove;\r\n    // eslint-disable-next-line\r\n  }, [bidToken, formState, txIsPending, network, tokenState.tokens])\r\n\r\n  const { bestBidToken, bestBidAmount } = useMemo(() => {\r\n    if (!bestBid) return {};\r\n    const bestBidToken =\r\n      tokenState.tokens[toBech32Address(bestBid.price.address)];\r\n    const bestBidAmount = bnOrZero(bestBid.price.amount).shiftedBy(\r\n      -(bestBidToken?.decimals ?? 0)\r\n    );\r\n\r\n    return {\r\n      bestBidToken,\r\n      bestBidAmount,\r\n    };\r\n  }, [bestBid, tokenState.tokens]);\r\n\r\n  const clearErrors = () => {\r\n    clearApproveError();\r\n    setPurchaseError();\r\n    setWrapError();\r\n    setWrapCompleteError();\r\n  }\r\n\r\n  const onApproveTx = () => {\r\n    if (!bidToken) return;\r\n    if (bidToken.isZil) return;\r\n    if (bnOrZero(formState.bidAmount).isLessThanOrEqualTo(0)) return;\r\n    if (loading) return;\r\n\r\n    runApproveTx(async () => {\r\n      const arkClient = new ArkClient(network);\r\n      const tokenProxyAddr = arkClient.tokenProxyAddress;\r\n      const tokenAddress = bidToken.address;\r\n      const tokenAmount = bnOrZero(formState.bidAmount);\r\n      const observedTx = await ZilswapConnector.approveTokenTransfer({\r\n        tokenAmount: tokenAmount.shiftedBy(bidToken.decimals),\r\n        tokenID: tokenAddress,\r\n        spenderAddress: tokenProxyAddr,\r\n      });\r\n\r\n      if (!observedTx)\r\n        throw new Error(\"Transfer allowance already sufficient for specified amount\");\r\n\r\n      const walletObservedTx: WalletObservedTx = {\r\n        ...observedTx!,\r\n        address: wallet?.addressInfo.bech32 || \"\",\r\n        network,\r\n      };\r\n\r\n      setPendingTxHash(walletObservedTx.hash.toLowerCase());\r\n      dispatch(actions.Transaction.observe({ observedTx: walletObservedTx }));\r\n      toaster(\"Submitted\", { hash: walletObservedTx.hash });\r\n    });\r\n  };\r\n\r\n  const onWrap = () => {\r\n    const wzilBalance = bnOrZero(bidToken.balance)\r\n    const zilBalance = bnOrZero(tokenState.tokens[ZIL_ADDRESS].balance)\r\n    const requiredAmount = bnOrZero(formState.bidAmount).shiftedBy(bidToken.decimals)\r\n    const wrapAmount = requiredAmount.minus(wzilBalance)\r\n    if (zilBalance.lt(wrapAmount)) {\r\n      setWrapError(new Error(`Insufficient ZIL balance to wrap. Require ${wrapAmount.shiftedBy(-bidToken.decimals).toFormat(2)\r\n        } more wZIL but only have ${zilBalance.shiftedBy(-12).toFormat(2)} ZIL.`));\r\n      return\r\n    }\r\n\r\n    runWrapTx(async () => {\r\n      const arkClient = new ArkClient(network);\r\n      const zilswap = ZilswapConnector.getSDK();\r\n      const result = await arkClient.wrapZil(wrapAmount, zilswap);\r\n\r\n      zilswap.observeTx({\r\n        hash: result.id!,\r\n        deadline: Number.MAX_SAFE_INTEGER,\r\n      });\r\n\r\n      waitForWrapComplete(result.id!);\r\n\r\n      toaster(`Wrap token txn submitted!`, { hash: result.id });\r\n    });\r\n  }\r\n\r\n  const waitForWrapComplete = (txId: string) => {\r\n    waitWrapComplete(async () => {\r\n\r\n      logger(\"watching for wrap tx complete\", txId);\r\n      await waitForTx(txId);\r\n    });\r\n  }\r\n\r\n  const onExpiryChange = (expiryBlock: number) => {\r\n    setExpiry(expiryBlock)\r\n  }\r\n\r\n  const onConfirm = () => {\r\n    if (!wallet || !exchangeInfo) return;\r\n\r\n    clearErrors();\r\n\r\n    runConfirmPurchase(async () => {\r\n      const { collection: address, id } = match.params;\r\n\r\n      if (!bidToken) return; // TODO: handle token not found\r\n\r\n      const priceAmount = bnOrZero(formState.bidAmount).shiftedBy(\r\n        bidToken.decimals\r\n      );\r\n\r\n      if (!bidToken.balance || bidToken.balance?.lt(priceAmount)) {\r\n        setPurchaseError(new Error(\"Insufficient balance.\"))\r\n        return;\r\n      }\r\n\r\n      const price = {\r\n        amount: priceAmount,\r\n        address: fromBech32Address(bidToken.address),\r\n      };\r\n      const feeAmount = priceAmount\r\n        .times(exchangeInfo.baseFeeBps)\r\n        .dividedToIntegerBy(10000)\r\n        .plus(1);\r\n\r\n      const arkClient = new ArkClient(network);\r\n      const nonce = new BigNumber(Math.random())\r\n        .times(2147483647)\r\n        .decimalPlaces(0)\r\n        .toString(10); // int32 max 2147483647\r\n      const message = arkClient.arkMessage(\r\n        \"Execute\",\r\n        arkClient.arkChequeHash({\r\n          side: \"Buy\",\r\n          token: { address, id },\r\n          price,\r\n          feeAmount,\r\n          expiry,\r\n          nonce,\r\n        })\r\n      );\r\n\r\n      const { signature, publicKey } = (await wallet.provider!.wallet.sign(\r\n        message as any\r\n      )) as any;\r\n\r\n      const result = await arkClient.postTrade({\r\n        publicKey,\r\n        signature,\r\n\r\n        collectionAddress: address,\r\n        address: wallet.addressInfo.byte20.toLowerCase(),\r\n        tokenId: id,\r\n        side: \"Buy\",\r\n        expiry,\r\n        nonce,\r\n        price,\r\n      });\r\n\r\n      if (onComplete) onComplete();\r\n      dispatch(actions.Layout.toggleShowBidNftDialog(\"close\"));\r\n      logger(\"post trade\", result);\r\n      toaster(`Bid confirmed for token #${id}!`);\r\n    });\r\n  };\r\n\r\n  const onCloseDialog = () => {\r\n    if (loading) return;\r\n    dispatch(actions.Layout.toggleShowBidNftDialog(\"close\"));\r\n    setCompletedPurchase(false);\r\n  };\r\n\r\n  const onViewCollection = () => {\r\n    dispatch(actions.Layout.toggleShowBidNftDialog(\"close\"));\r\n    history.push(\"/arky/profile\");\r\n  };\r\n\r\n  const onCurrencyChange = (token: TokenInfo) => {\r\n    clearErrors();\r\n    setBidToken(token);\r\n  };\r\n\r\n  const onBidAmountChange = (rawAmount: string = \"0\") => {\r\n    clearErrors();\r\n    setFormState({\r\n      ...formState,\r\n      bidAmount: rawAmount,\r\n    });\r\n  };\r\n\r\n  const onEndEditBidAmount = () => {\r\n    let bidAmount = new BigNumber(formState.bidAmount).decimalPlaces(\r\n      bidToken?.decimals ?? 0\r\n    );\r\n    if (bidAmount.isNaN() || bidAmount.isNegative() || !bidAmount.isFinite())\r\n      setFormState({\r\n        ...formState,\r\n        bidAmount: \"0\",\r\n      });\r\n  };\r\n\r\n  const onToggleAcceptTerms = () => {\r\n    if (formState.acceptTerms) localStorage.removeItem(bidStorageKey);\r\n    else localStorage.setItem(bidStorageKey, JSON.stringify(\"true\"));\r\n    setFormState({\r\n      ...formState,\r\n      acceptTerms: !formState.acceptTerms,\r\n    })\r\n  }\r\n\r\n  return (\r\n    <DialogModal\r\n      header=\"Place an Offer\"\r\n      {...rest}\r\n      open={open}\r\n      onClose={onCloseDialog}\r\n      className={cls(classes.root, className)}\r\n    >\r\n      <DialogContent className={cls(classes.dialogContent)}>\r\n        {/* Nft card */}\r\n        <ArkNFTCard\r\n          className={classes.nftCard}\r\n          token={token}\r\n          collectionAddress={fromBech32Address(collectionAddress)}\r\n          dialog={true}\r\n        />\r\n\r\n        <Box className={classes.bidContainer}>\r\n          <CurrencyInput\r\n            label=\"Offer Amount\"\r\n            tokenList=\"ark-zil\"\r\n            inputClassName={cls({ [classes.expandedCurrencyInput]: !!bestBid })}\r\n            token={bidToken ?? null}\r\n            amount={formState.bidAmount}\r\n            dialogOpts={{ zrc2Only: true }}\r\n            onEditorBlur={onEndEditBidAmount}\r\n            onAmountChange={onBidAmountChange}\r\n            onCurrencyChange={onCurrencyChange}\r\n          >\r\n            {bestBid && (\r\n              <Box display=\"flex\" alignItems=\"center\" className={classes.bestBid}>\r\n                <Text className={classes.bestBidLabel}>\r\n                  Highest Offer:\r\n                </Text>\r\n                {toHumanNumber(bestBidAmount)}\r\n                <CurrencyLogo\r\n                  currency={bestBidToken?.symbol}\r\n                  address={bestBidToken?.address}\r\n                  className={classes.bestBidTokenLogo}\r\n                />\r\n              </Box>\r\n            )}\r\n          </CurrencyInput>\r\n\r\n          {/* Set expiry */}\r\n          <ArkExpiry label=\"Offer Expiry\" onExpiryChange={onExpiryChange} />\r\n\r\n          {!completedPurchase && (\r\n            <Fragment>\r\n              {/* Terms */}\r\n              <Box className={classes.termsBox}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      className={classes.radioButton}\r\n                      checkedIcon={<CheckedIcon />}\r\n                      icon={<UncheckedIcon fontSize=\"small\" />}\r\n                      checked={formState.acceptTerms}\r\n                      onChange={() => onToggleAcceptTerms()}\r\n                      disableRipple\r\n                    />\r\n                  }\r\n                  label={\r\n                    <Text>\r\n                      I accept ARKY's terms and conditions.\r\n                    </Text>\r\n                  }\r\n                />\r\n              </Box>\r\n\r\n              {wrappingRequired && (\r\n                <Box className={classes.infoBox}>\r\n                  <Text>\r\n                    You will need to wrap your <strong>ZIL</strong> to <strong>Wrapped ZIL</strong> (<strong>wZIL</strong>) in Step 2\r\n                    to place this bid. wZIL can be exchanged back to ZIL in a 1:1 ratio. Click\r\n                    {\" \"}\r\n                    <Link\r\n                      rel=\"noopener noreferrer\"\r\n                      target=\"_blank\"\r\n                      href=\"https://dev.zilliqa.com/docs/dev/dev-wrapped-zil\"\r\n                    >\r\n                      <strong>here</strong>\r\n                    </Link>\r\n                    {\" \"}\r\n                    to learn more.\r\n                  </Text>\r\n                </Box>\r\n              )}\r\n\r\n              {\r\n                wrappingRequired ?\r\n                  <FancyButton\r\n                    className={classes.actionButton}\r\n                    loading={loadingWrapTx || completeWrapPending}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={onWrap}\r\n                    disabled={!isBidEnabled}\r\n                    walletRequired\r\n                  >\r\n                    Wrap ZIL\r\n                  </FancyButton>\r\n                  :\r\n                  <FancyButton\r\n                    showTxApprove={showTxApprove}\r\n                    loadingTxApprove={txIsPending}\r\n                    onClickTxApprove={onApproveTx}\r\n                    className={classes.actionButton}\r\n                    loading={loading}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={onConfirm}\r\n                    disabled={!isBidEnabled}\r\n                    walletRequired\r\n                  >\r\n                    Place Offer\r\n                  </FancyButton>\r\n              }\r\n\r\n              {(error || wrapError || approveError || wrapCompleteError) && (\r\n                <Box className={classes.errorBox}>\r\n                  <WarningIcon className={classes.warningIcon} />\r\n                  <Text color=\"error\">\r\n                    Error: {(error?.message || wrapError?.message || approveError?.message || wrapCompleteError?.message) ?? \"Unknown error\"}\r\n                  </Text>\r\n                </Box>\r\n              )}\r\n\r\n            </Fragment>\r\n          )}\r\n        </Box>\r\n\r\n        {completedPurchase && (\r\n          <FancyButton\r\n            className={classes.collectionButton}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={onViewCollection}\r\n            walletRequired\r\n          >\r\n            View Collection\r\n          </FancyButton>\r\n        )}\r\n      </DialogContent>\r\n    </DialogModal>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    \"& .MuiDialogTitle-root\": {\r\n      padding: theme.spacing(3),\r\n      \"& .MuiTypography-root\": {\r\n        fontFamily: \"'Raleway', sans-serif\",\r\n        fontWeight: 700,\r\n        fontSize: \"24px\",\r\n      },\r\n      \"& .MuiSvgIcon-root\": {\r\n        fontSize: \"1.8rem\",\r\n      },\r\n    },\r\n    \"& .MuiOutlinedInput-root\": {\r\n      border: \"none\",\r\n    },\r\n  },\r\n  backdrop: {\r\n    position: \"absolute\",\r\n    zIndex: 0,\r\n    overflow: \"hidden\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n    padding: theme.spacing(3),\r\n  },\r\n  dialogContent: {\r\n    backgroundColor: theme.palette.background.default,\r\n    borderLeft:\r\n      theme.palette.border,\r\n    borderRight:\r\n      theme.palette.border,\r\n    borderBottom:\r\n      theme.palette.border,\r\n    borderRadius: \"0 0 12px 12px\",\r\n    padding: theme.spacing(0, 3, 2),\r\n    overflowY: \"auto\",\r\n    \"&::-webkit-scrollbar-track\": {\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n    \"&::-webkit-scrollbar\": {\r\n      width: \"0.5rem\"\r\n    },\r\n    '&::-webkit-scrollbar-thumb': {\r\n      backgroundColor: `rgba${hexToRGBA(theme.palette.type === \"dark\" ? \"#DEFFFF\" : \"#003340\", 0.1)}`,\r\n      borderRight: \"3px solid transparent\",\r\n      backgroundClip: \"padding-box\"\r\n    },\r\n    display: \"flex\",\r\n    [theme.breakpoints.down('sm')]: {\r\n      flexDirection: \"column\",\r\n      minWidth: 380,\r\n      maxWidth: 411,\r\n    },\r\n  },\r\n  bidContainer: {\r\n    [theme.breakpoints.up('md')]: {\r\n      marginLeft: theme.spacing(2),\r\n      maxWidth: 420\r\n    }\r\n  },\r\n  expandedCurrencyInput: {\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  bestBid: {\r\n    zIndex: 1,\r\n    fontFamily: \"Avenir Next\",\r\n    fontSize: 12,\r\n    color: theme.palette.text!.primary,\r\n    marginLeft: 18,\r\n    marginTop: theme.spacing(-3.7),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  bestBidLabel: {\r\n    color: theme.palette.text!.primary,\r\n    opacity: 0.6,\r\n    marginRight: 4,\r\n  },\r\n  bestBidTokenLogo: {\r\n    height: \"18px !important\",\r\n    width: \"18px !important\",\r\n  },\r\n  actionButton: {\r\n    height: 46,\r\n  },\r\n  collectionButton: {\r\n    height: 46,\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  nftCard: {\r\n    maxWidth: \"none\",\r\n    [theme.breakpoints.up('md')]: {\r\n      maxWidth: 360\r\n    }\r\n  },\r\n  radioButton: {\r\n    padding: \"6px\",\r\n    \"&:hover\": {\r\n      background: \"transparent!important\",\r\n    },\r\n  },\r\n  termsBox: {\r\n    display: \"flex\",\r\n    justifyContent: \"flex-start\",\r\n    marginLeft: 2,\r\n    marginTop: theme.spacing(1.5),\r\n    marginBottom: theme.spacing(1),\r\n    \"& .MuiFormControlLabel-root\": {\r\n      marginLeft: \"-8px\",\r\n      marginRight: 0,\r\n    },\r\n  },\r\n  priceBox: {\r\n    borderRadius: 12,\r\n    padding: theme.spacing(1.5),\r\n    backgroundColor: theme.palette.currencyInput,\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  priceText: {\r\n    fontSize: \"20px\",\r\n    lineHeight: \"30px\",\r\n  },\r\n  price: {\r\n    fontFamily: \"'Raleway', sans-serif\",\r\n    fontWeight: 900,\r\n    fontSize: \"28px\",\r\n    paddingBottom: \"4px\",\r\n    color: theme.palette.primary.dark,\r\n  },\r\n  currencyLogo: {\r\n    paddingBottom: \"4px\",\r\n  },\r\n  txText: {\r\n    color: theme.palette.label,\r\n  },\r\n  icon: {\r\n    fontSize: \"14px\",\r\n    color: theme.palette.label,\r\n  },\r\n  link: {\r\n    color: theme.palette.text?.primary,\r\n  },\r\n  linkIcon: {\r\n    marginLeft: 2,\r\n    verticalAlign: \"top\",\r\n  },\r\n  loadingTitle: {\r\n    fontFamily: \"'Raleway', sans-serif\",\r\n    fontSize: \"24px\",\r\n    linHeight: \"40px\",\r\n  },\r\n  loadingBody: {\r\n    fontSize: \"14px\",\r\n    lineHeight: \"24px\",\r\n    marginTop: theme.spacing(0.5),\r\n  },\r\n  errorBox: {\r\n    marginTop: theme.spacing(2),\r\n    minHeight: 46,\r\n    width: \"100%\",\r\n    border: \"1px solid #FF5252\",\r\n    backgroundColor: `rgba${hexToRGBA(\"#FF5252\", 0.2)}`,\r\n    borderRadius: 12,\r\n    padding: theme.spacing(2, 3),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  warningIcon: {\r\n    height: 24,\r\n    width: 24,\r\n    flex: \"none\",\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  infoBox: {\r\n    marginBottom: theme.spacing(2),\r\n    minHeight: 46,\r\n    width: \"100%\",\r\n    border: \"1px solid #FFDF6B\",\r\n    backgroundColor: `rgba${hexToRGBA(\"#FFDF6B\", 0.2)}`,\r\n    borderRadius: 12,\r\n    padding: theme.spacing(2),\r\n    \"& .MuiTypography-root\": {\r\n      color: \"#FFDF6B\",\r\n      fontSize: \"14px\",\r\n      lineHeight: \"17px\",\r\n      [theme.breakpoints.down('sm')]: {\r\n        fontSize: \"12px\",\r\n      },\r\n    }\r\n  },\r\n}));\r\n\r\nexport default BidDialog;\r\n","var _path, _ellipse, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVerifiedBadge(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23 12L20.56 9.21L20.9 5.52L17.29 4.7L15.4 1.5L12 2.96L8.6 1.5L6.71 4.69L3.1 5.5L3.44 9.2L1 12L3.44 14.79L3.1 18.49L6.71 19.31L8.6 22.5L12 21.03L15.4 22.49L17.29 19.3L20.9 18.48L20.56 14.79L23 12ZM9.38 16.01L7 13.61C6.61 13.22 6.61 12.59 7 12.2L7.07 12.13C7.46 11.74 8.1 11.74 8.49 12.13L10.1 13.75L15.25 8.59C15.64 8.2 16.28 8.2 16.67 8.59L16.74 8.66C17.13 9.05 17.13 9.68 16.74 10.07L10.82 16.01C10.41 16.4 9.78 16.4 9.38 16.01Z\",\n    fill: \"#00FFB0\"\n  })), _ellipse || (_ellipse = /*#__PURE__*/React.createElement(\"ellipse\", {\n    cx: 11.5,\n    cy: 11.5,\n    rx: 7.5,\n    ry: 6.5,\n    fill: \"#00FFB0\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.1671 19.5H10.3338L11.1671 13.6667H8.25042C7.76709 13.6667 7.77542 13.4 7.93375 13.1167C8.09209 12.8333 7.97542 13.05 7.99209 13.0167C9.06709 11.1167 10.6838 8.28333 12.8338 4.5H13.6671L12.8338 10.3333H15.7504C16.1588 10.3333 16.2171 10.6083 16.1421 10.7583L16.0838 10.8833C12.8004 16.625 11.1671 19.5 11.1671 19.5Z\",\n    fill: \"#003340\",\n    fillOpacity: 0.5\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgVerifiedBadge);\nexport default __webpack_public_path__ + \"static/media/verified-badge.fe0d4899.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Fragment, useMemo, useState } from \"react\";\r\nimport { Backdrop, Box, Checkbox, CircularProgress, DialogContent, DialogProps, FormControlLabel, Link } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport UncheckedIcon from \"@material-ui/icons/CheckBoxOutlineBlankRounded\";\r\nimport LaunchIcon from \"@material-ui/icons/Launch\";\r\nimport { Transaction } from \"@zilliqa-js/account\";\r\nimport { toBech32Address } from \"@zilliqa-js/zilliqa\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport cls from \"classnames\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useRouteMatch } from \"react-router\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { CurrencyLogo, DialogModal, FancyButton, Text, ArkNFTCard } from \"app/components\";\r\nimport { getBlockchain, getMarketplace, getTokens, getTransactions, getWallet } from \"app/saga/selectors\";\r\nimport { actions } from \"app/store\";\r\nimport { Nft } from \"app/store/marketplace/types\";\r\nimport { RootState } from \"app/store/types\";\r\nimport { AppTheme } from \"app/theme/types\";\r\nimport { bnOrZero, hexToRGBA, truncate, useAsyncTask, useToaster, getLocalStored } from \"app/utils\";\r\nimport { ReactComponent as CheckedIcon } from \"app/views/ark/Collections/checked-icon.svg\";\r\nimport { LocalStorageKeys } from \"app/utils/constants\";\r\nimport { ArkClient, logger, waitForTx } from \"core/utilities\";\r\nimport { fromBech32Address, ZilswapConnector } from \"core/zilswap\";\r\nimport { ReactComponent as WarningIcon } from \"../assets/warning.svg\";\r\nimport { ReactComponent as ChainLinkIcon } from \"./chainlink.svg\";\r\n\r\ninterface Props extends Partial<DialogProps> {\r\n  token: Nft;\r\n  collectionAddress: string;\r\n  onComplete?: () => void;\r\n}\r\n\r\nconst buyStorageKey = LocalStorageKeys.ArkBuyAcceptTerms\r\n\r\nconst BuyDialog: React.FC<Props> = (props: Props) => {\r\n  const { children, className, collectionAddress, token, onComplete, ...rest } = props;\r\n  const classes = useStyles();\r\n  const { network } = useSelector(getBlockchain);\r\n  const tokenState = useSelector(getTokens);\r\n  const { wallet } = useSelector(getWallet);\r\n  const txState = useSelector(getTransactions);\r\n  const { exchangeInfo } = useSelector(getMarketplace);\r\n  const open = useSelector<RootState, boolean>((state) => state.layout.showBuyNftDialog);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [runConfirmPurchase, loading, confirmPurchaseError] = useAsyncTask(\"confirmPurchase\");\r\n  const [runApproveTx, loadingApproveTx, errorApproveTx, clearApproveError] = useAsyncTask(\"approveTx\");\r\n  const [waitForComplete, completePending, waitCompleteError, clearWaitCompleteError] = useAsyncTask(\"waitForPurchaseComplete\");\r\n  const match = useRouteMatch<{ id: string, collection: string }>();\r\n  const [acceptTerms, setAcceptTerms] = useState<boolean>(!!getLocalStored(buyStorageKey));\r\n  const [completedPurchase, setCompletedPurchase] = useState<boolean>(false);\r\n  const [purchaseTxHash, setPurchaseTxHash] = useState<string | null>(null);\r\n  const [approveTxHash, setApproveTxHash] = useState<string | null>(null);\r\n  const toaster = useToaster();\r\n\r\n  const error = confirmPurchaseError ?? waitCompleteError;\r\n  const txIsPending = loadingApproveTx || txState.observingTxs.findIndex(tx => tx.hash.toLowerCase() === approveTxHash) >= 0;\r\n\r\n  const bestAsk = token.bestAsk;\r\n\r\n  const {\r\n    priceToken,\r\n    priceHuman,\r\n  } = useMemo(() => {\r\n    if (!bestAsk) return {};\r\n    const priceToken = tokenState.tokens[toBech32Address(bestAsk.price.address)];\r\n    const priceHuman = bnOrZero(bestAsk.price.amount).shiftedBy(-(priceToken?.decimals ?? 0));\r\n\r\n    return {\r\n      priceToken,\r\n      priceHuman,\r\n    }\r\n  }, [bestAsk, tokenState.tokens])\r\n\r\n  const showTxApprove = useMemo(() => {\r\n    if (!bestAsk || !priceToken || priceToken?.isZil) return false;\r\n    const arkClient = new ArkClient(network);\r\n    const tokenProxyAddr = arkClient.tokenProxyAddress;\r\n\r\n    const priceAmount = bnOrZero(bestAsk.price.amount);\r\n    const unitlessInAmount = priceAmount.shiftedBy(priceToken!.decimals);\r\n    const approved = bnOrZero(priceToken.allowances![tokenProxyAddr] || '0')\r\n    const showTxApprove = approved.isZero() || approved.comparedTo(unitlessInAmount) < 0;\r\n\r\n    return showTxApprove;\r\n    // eslint-disable-next-line\r\n  }, [bestAsk, priceToken, network, txIsPending, tokenState.tokens])\r\n\r\n  const onApproveTx = () => {\r\n    if (!bestAsk) return;\r\n    if (!priceToken) return;\r\n    if (priceToken.isZil) return;\r\n    if (loading) return;\r\n\r\n    runApproveTx(async () => {\r\n      const arkClient = new ArkClient(network);\r\n      const tokenAddress = priceToken.address;\r\n      const tokenAmount = new BigNumber(bestAsk.price.amount);\r\n      const observedTx = await ZilswapConnector.approveTokenTransfer({\r\n        tokenAmount: tokenAmount.shiftedBy(priceToken.decimals),\r\n        tokenID: tokenAddress,\r\n        spenderAddress: arkClient.tokenProxyAddress\r\n      });\r\n\r\n      if (observedTx) {\r\n        setApproveTxHash(observedTx.hash);\r\n        dispatch(actions.Transaction.observe({\r\n          observedTx: {\r\n            deadline: observedTx.deadline,\r\n            hash: observedTx.hash,\r\n            address: wallet?.addressInfo.bech32 || \"\",\r\n            network,\r\n          },\r\n        }));\r\n        toaster(\"Submitted\", { hash: observedTx.hash });\r\n      }\r\n    });\r\n  };\r\n\r\n  const onConfirm = () => {\r\n    if (!wallet?.provider || !match.params?.collection || !match.params?.id || !bestAsk || !exchangeInfo) return;\r\n\r\n    clearApproveError();\r\n    clearWaitCompleteError();\r\n\r\n    runConfirmPurchase(async () => {\r\n      const { collection: address, id } = match.params\r\n\r\n      if (!priceToken) return; // TODO: handle token not found\r\n\r\n      const priceAmount = new BigNumber(bestAsk.price.amount);\r\n      if (!priceToken.balance || priceToken.balance?.lt(priceAmount))\r\n        throw new Error(\"Insufficient balance\");\r\n\r\n      const price = { amount: priceAmount, address: fromBech32Address(priceToken.address) };\r\n      const feeAmount = priceAmount.times(exchangeInfo.baseFeeBps).dividedToIntegerBy(10000).plus(1);\r\n\r\n      const arkClient = new ArkClient(network);\r\n      const nonce = new BigNumber(Math.random()).times(2147483647).decimalPlaces(0).toString(10); // int32 max 2147483647\r\n      const currentBlock = ZilswapConnector.getCurrentBlock();\r\n      const expiry = currentBlock + 25; // blocks\r\n      const message = arkClient.arkMessage(\"Execute\", arkClient.arkChequeHash({\r\n        side: \"Buy\",\r\n        token: { address, id, },\r\n        price,\r\n        feeAmount,\r\n        expiry,\r\n        nonce,\r\n      }))\r\n\r\n      const { signature, publicKey } = (await wallet.provider!.wallet.sign(message as any)) as any\r\n\r\n      const buyCheque: ArkClient.ExecuteBuyCheque = {\r\n        side: \"buy\",\r\n        expiry,\r\n        nonce,\r\n        publicKey: `0x${publicKey}`,\r\n        signature: `0x${signature}`,\r\n      }\r\n\r\n      const zilswap = ZilswapConnector.getSDK();\r\n\r\n      const execTradeResult = await arkClient.executeTrade({\r\n        buyCheque,\r\n        sellCheque: bestAsk,\r\n        nftAddress: address,\r\n        tokenId: id,\r\n      }, zilswap);\r\n\r\n      zilswap.observeTx({\r\n        hash: execTradeResult.id!,\r\n        deadline: Number.MAX_SAFE_INTEGER,\r\n      });\r\n\r\n      // execute asynchronously to unblock loading for send tx.\r\n      waitForPurchaseComplete(execTradeResult);\r\n\r\n      logger(\"exec trade result\", execTradeResult)\r\n      toaster(`Transaction token #${token.tokenId} purchase submitted!`, { hash: execTradeResult.id });\r\n    });\r\n  };\r\n\r\n  const waitForPurchaseComplete = (tx: Transaction) => {\r\n    waitForComplete(async () => {\r\n\r\n      logger(\"watching for purchase complete\", tx.id);\r\n      const confirmedTx = await waitForTx(tx.id!);\r\n\r\n      const success = confirmedTx.isConfirmed() && !confirmedTx.isRejected();\r\n      setCompletedPurchase(success);\r\n      if (success) {\r\n        setPurchaseTxHash(confirmedTx.hash);\r\n        onComplete?.();\r\n      } else {\r\n        throw new Error(\"Purchase failed\");\r\n      }\r\n    });\r\n  }\r\n\r\n  const onCloseDialog = () => {\r\n    dispatch(actions.Layout.toggleShowBuyNftDialog(\"close\"));\r\n    setCompletedPurchase(false);\r\n  };\r\n\r\n  const onViewCollection = () => {\r\n    dispatch(actions.Layout.toggleShowBuyNftDialog(\"close\"));\r\n    history.push(\"/arky/profile\");\r\n  };\r\n\r\n  const dialogHeader = completePending\r\n    ? \"\"\r\n    : completedPurchase\r\n      ? \"You now own\"\r\n      : \"Confirm Purchase\";\r\n\r\n  const onAcceptTerms = () => {\r\n    setAcceptTerms(!acceptTerms);\r\n    if (acceptTerms) localStorage.removeItem(buyStorageKey);\r\n    else localStorage.setItem(buyStorageKey, JSON.stringify(\"true\"));\r\n  }\r\n\r\n  return (\r\n    <DialogModal\r\n      header={dialogHeader}\r\n      {...rest}\r\n      open={open}\r\n      onClose={loading ? undefined : onCloseDialog}\r\n      className={cls(classes.root, className)}\r\n      hideCloseButton={completePending}\r\n      titlePadding={!!completePending}\r\n    >\r\n      <DialogContent className={cls(classes.dialogContent)}>\r\n        {/* Nft card */}\r\n        <ArkNFTCard\r\n          className={classes.nftCard}\r\n          token={token}\r\n          collectionAddress={fromBech32Address(collectionAddress)}\r\n          dialog={true}\r\n        />\r\n\r\n        {/* Price Box */}\r\n        <Box className={classes.priceBox}>\r\n          {!completedPurchase && (\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"space-between\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Text className={classes.priceText}>\r\n                Purchase Price\r\n              </Text>\r\n              {priceToken && (\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <Text className={classes.price}>\r\n                    {priceHuman?.toString(10)}\r\n                  </Text>\r\n                  <CurrencyLogo\r\n                    currency={priceToken?.symbol}\r\n                    address={priceToken.address}\r\n                    className={classes.currencyLogo}\r\n                  />\r\n                </Box>\r\n              )}\r\n            </Box>\r\n          )}\r\n\r\n          {completedPurchase && (\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"space-between\"\r\n              alignItems=\"center\"\r\n              mt={0.5}\r\n            >\r\n              <Text className={classes.txText}>Transaction Hash</Text>\r\n              {purchaseTxHash && (\r\n                <Text>\r\n                  <Link\r\n                    className={classes.link}\r\n                    underline=\"hover\"\r\n                    rel=\"noopener noreferrer\"\r\n                    target=\"_blank\"\r\n                    href={\"hello\"}\r\n                  >\r\n                    {truncate(purchaseTxHash, 5, 5)}\r\n                    <LaunchIcon className={cls(classes.icon, classes.linkIcon)} />\r\n                  </Link>\r\n                </Text>\r\n              )}\r\n            </Box>\r\n          )}\r\n        </Box>\r\n\r\n        {!(completePending || completedPurchase) && (\r\n          <Fragment>\r\n            {/* Terms */}\r\n            <Box className={classes.termsBox}>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    className={classes.radioButton}\r\n                    checkedIcon={<CheckedIcon />}\r\n                    icon={<UncheckedIcon fontSize=\"small\" />}\r\n                    checked={acceptTerms}\r\n                    onChange={() => onAcceptTerms()}\r\n                    disableRipple\r\n                  />\r\n                }\r\n                label={\r\n                  <Text>\r\n                    I accept ARKY's terms and conditions.\r\n                  </Text>\r\n                }\r\n              />\r\n            </Box>\r\n\r\n            <FancyButton\r\n              showTxApprove={showTxApprove}\r\n              loadingTxApprove={txIsPending}\r\n              onClickTxApprove={onApproveTx}\r\n              className={classes.actionButton}\r\n              loading={loading}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={onConfirm}\r\n              disabled={!acceptTerms}\r\n              walletRequired\r\n            >\r\n              Confirm Purchase\r\n            </FancyButton>\r\n\r\n            {error && (\r\n              <Box className={classes.errorBox}>\r\n                <WarningIcon className={classes.warningIcon} />\r\n                <Text color=\"error\">\r\n                  Error: {(error?.message || errorApproveTx?.message) ?? \"Unknown error\"}\r\n                </Text>\r\n              </Box>\r\n            )}\r\n          </Fragment>\r\n        )}\r\n\r\n        {completedPurchase && (\r\n          <Box className={classes.completedBox}>\r\n            <FancyButton\r\n              className={classes.actionButton}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={onViewCollection}\r\n              walletRequired\r\n              fullWidth\r\n            >\r\n              View Collection\r\n            </FancyButton>\r\n\r\n            {/* <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\r\n              <Text className={classes.shareText}>Share</Text>\r\n              <SocialLinkGroup collection={token.collection} />\r\n            </Box> */}\r\n          </Box>\r\n        )}\r\n\r\n        {/* to clean up */}\r\n        <Backdrop open={completePending} className={classes.backdrop}>\r\n          <Box flex={1}>\r\n            <Text variant=\"h2\" align=\"center\" className={classes.loadingTitle}>\r\n              Purchase Processing\r\n            </Text>\r\n\r\n            <Text align=\"center\" className={classes.loadingBody}>\r\n              Sit tight, it should be confirmed shortly.\r\n            </Text>\r\n          </Box>\r\n\r\n          <CircularProgress color=\"primary\" />\r\n          <Box marginBottom={2} />\r\n          <ChainLinkIcon />\r\n\r\n          <Box flex={1} />\r\n        </Backdrop>\r\n      </DialogContent>\r\n    </DialogModal>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    \"& .MuiDialogTitle-root\": {\r\n      padding: theme.spacing(3),\r\n      \"& .MuiTypography-root\": {\r\n        fontFamily: \"'Raleway', sans-serif\",\r\n        fontWeight: 700,\r\n        fontSize: \"24px\",\r\n        linHeight: \"36px\",\r\n      },\r\n      \"& .MuiSvgIcon-root\": {\r\n        fontSize: \"1.8rem\",\r\n      },\r\n    },\r\n    position: \"relative\",\r\n  },\r\n  backdrop: {\r\n    position: \"absolute\",\r\n    zIndex: 0,\r\n    overflow: \"hidden\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n    padding: theme.spacing(3),\r\n  },\r\n  dialogContent: {\r\n    backgroundColor: theme.palette.background.default,\r\n    borderLeft:\r\n      theme.palette.border,\r\n    borderRight:\r\n      theme.palette.border,\r\n    borderBottom:\r\n      theme.palette.border,\r\n    borderRadius: \"0 0 12px 12px\",\r\n    padding: theme.spacing(0, 3, 2),\r\n    minWidth: 380,\r\n    maxWidth: 411,\r\n    overflowY: \"auto\",\r\n    \"&::-webkit-scrollbar-track\": {\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n    \"&::-webkit-scrollbar\": {\r\n      width: \"0.5rem\"\r\n    },\r\n    '&::-webkit-scrollbar-thumb': {\r\n      backgroundColor: `rgba${hexToRGBA(theme.palette.type === \"dark\" ? \"#DEFFFF\" : \"#003340\", 0.1)}`,\r\n      borderRight: \"3px solid transparent\",\r\n      backgroundClip: \"padding-box\"\r\n    },\r\n  },\r\n  actionButton: {\r\n    height: 46,\r\n  },\r\n  nftCard: {\r\n    maxWidth: \"none\",\r\n  },\r\n  radioButton: {\r\n    padding: \"6px\",\r\n    \"&:hover\": {\r\n      background: \"transparent!important\",\r\n    },\r\n  },\r\n  termsBox: {\r\n    display: \"flex\",\r\n    justifyContent: \"flex-start\",\r\n    marginLeft: 2,\r\n    marginTop: theme.spacing(1.5),\r\n    marginBottom: theme.spacing(1),\r\n    \"& .MuiFormControlLabel-root\": {\r\n      marginLeft: \"-8px\",\r\n      marginRight: 0,\r\n    },\r\n  },\r\n  priceBox: {\r\n    borderRadius: 12,\r\n    padding: theme.spacing(1.5),\r\n    backgroundColor: theme.palette.currencyInput,\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  priceText: {\r\n    fontSize: \"20px\",\r\n    lineHeight: \"30px\",\r\n  },\r\n  price: {\r\n    fontFamily: \"'Raleway', sans-serif\",\r\n    fontWeight: 900,\r\n    fontSize: \"28px\",\r\n    paddingBottom: \"4px\",\r\n    color: theme.palette.primary.dark,\r\n  },\r\n  currencyLogo: {\r\n    paddingBottom: \"4px\",\r\n  },\r\n  txText: {\r\n    color: theme.palette.label,\r\n  },\r\n  icon: {\r\n    fontSize: \"14px\",\r\n    color: theme.palette.label,\r\n  },\r\n  link: {\r\n    color: theme.palette.text?.primary,\r\n  },\r\n  linkIcon: {\r\n    marginLeft: 2,\r\n    verticalAlign: \"top\",\r\n  },\r\n  loadingTitle: {\r\n    fontFamily: \"'Raleway', sans-serif\",\r\n    fontSize: \"24px\",\r\n    linHeight: \"40px\",\r\n  },\r\n  loadingBody: {\r\n    fontSize: \"14px\",\r\n    lineHeight: \"24px\",\r\n    marginTop: theme.spacing(0.5),\r\n  },\r\n  completedBox: {\r\n    marginTop: theme.spacing(1.5),\r\n  },\r\n  shareText: {\r\n    color: theme.palette.label,\r\n    marginTop: theme.spacing(1.5),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  errorBox: {\r\n    marginTop: theme.spacing(2),\r\n    minHeight: 46,\r\n    width: \"100%\",\r\n    border: \"1px solid #FF5252\",\r\n    backgroundColor: `rgba${hexToRGBA(\"#FF5252\", 0.2)}`,\r\n    borderRadius: 12,\r\n    padding: theme.spacing(2, 3),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  warningIcon: {\r\n    height: 24,\r\n    width: 24,\r\n    flex: \"none\",\r\n    marginRight: theme.spacing(1)\r\n  }\r\n}));\r\n\r\nexport default BuyDialog;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { Box, CircularProgress, DialogContent, DialogProps } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { fromBech32Address } from \"@zilliqa-js/crypto\";\r\nimport { Transaction } from \"@zilliqa-js/account\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useRouteMatch } from \"react-router\";\r\nimport { DialogModal, Text } from \"app/components\";\r\nimport { getBlockchain, getWallet } from \"app/saga/selectors\";\r\nimport { actions } from \"app/store\";\r\nimport { Cheque, Nft, RootState } from \"app/store/types\";\r\nimport { AppTheme } from \"app/theme/types\";\r\nimport { useAsyncTask, useToaster } from \"app/utils\";\r\nimport { ArkClient, logger } from \"core/utilities\";\r\nimport { ZilswapConnector } from \"core/zilswap\";\r\n\r\ninterface Props extends Partial<DialogProps> {\r\n  token: Nft;\r\n  onComplete?: (txs: Transaction[]) => Promise<void> | void;\r\n}\r\n\r\nconst CancelDialog: React.FC<Props> = (props: Props) => {\r\n  const { children, className, token, onComplete, ...rest } = props;\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const toaster = useToaster();\r\n  const { network } = useSelector(getBlockchain);\r\n  const { wallet } = useSelector(getWallet);\r\n  const match = useRouteMatch<{ id: string, collection: string }>();\r\n  const [sellCheques, setSellCheques] = useState<Cheque[]>([]);\r\n  const [cancelledCheques, setCancelledCheques] = useState<Cheque[]>([]);\r\n  const [runQueryAsks, loadingQueryAsks] = useAsyncTask(\"cancelQueryAsks\");\r\n  const [runCancelSell, loading, error, clearError] = useAsyncTask(\"cancelSellNft\");\r\n\r\n  const open = useSelector<RootState, boolean>(state => state.layout.showCancelSellNftDialog);\r\n\r\n  const onCloseDialog = () => {\r\n    dispatch(actions.Layout.toggleShowCancelSellNftDialog(\"close\"));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!wallet?.provider || !open) return;\r\n    clearError();\r\n    runQueryAsks(async () => {\r\n      const { collection: address, id } = match.params\r\n      const arkClient = new ArkClient(network);\r\n      const queryResult = await arkClient.listNftCheques({\r\n        collectionAddress: fromBech32Address(address),\r\n        initiatorAddress: wallet.addressInfo.byte20.toLowerCase(),\r\n        side: \"sell\",\r\n        isActive: \"true\",\r\n        tokenId: id,\r\n        limit: 100,\r\n      });\r\n\r\n      setSellCheques(queryResult.result.entries);\r\n\r\n      cancelSellCheques(queryResult.result.entries);\r\n    });\r\n\r\n    // eslint-disable-next-line\r\n  }, [wallet?.addressInfo.byte20, token.collection?.address, token.tokenId, open]);\r\n\r\n  const cancelSellCheques = (sellCheques: Cheque[]) => {\r\n    if (!wallet?.provider || !sellCheques.length) return;\r\n    runCancelSell(async () => {\r\n      const arkClient = new ArkClient(network);\r\n\r\n      const zilswap = ZilswapConnector.getSDK();\r\n      const cancelTxs: Transaction[] = [];\r\n      for (const cheque of sellCheques) {\r\n        const { chequeHash } = cheque;\r\n\r\n        const message = arkClient.arkMessage(\"Void\", chequeHash.replace(/^0x/i, \"\"));\r\n        const { signature, publicKey } = (await wallet.provider!.wallet.sign(message as any)) as any;\r\n\r\n        const voidChequeResult = await arkClient.voidCheque({\r\n          publicKey, signature, chequeHash,\r\n        }, zilswap);\r\n\r\n        zilswap.observeTx({\r\n          hash: voidChequeResult.id!,\r\n          deadline: zilswap.getCurrentBlock() + 1000,\r\n        });\r\n\r\n        setCancelledCheques(cancelledCheques => [\r\n          ...cancelledCheques,\r\n          cheque,\r\n        ]);\r\n\r\n        dispatch(actions.MarketPlace.listenPendingTx({\r\n          chequeHash,\r\n          txHash: voidChequeResult.id!,\r\n        }));\r\n\r\n        cancelTxs.push(voidChequeResult);\r\n\r\n        logger(\"exec trade result\", voidChequeResult)\r\n      }\r\n\r\n\r\n      onCloseDialog();\r\n      onComplete?.(cancelTxs);\r\n      toaster(\"Cancel listing transactions submitted!\")\r\n    });\r\n  };\r\n\r\n  return (\r\n    <DialogModal\r\n      header=\"Cancel Listing\"\r\n      open={open}\r\n      onClose={loading ? undefined : onCloseDialog}\r\n      {...rest}\r\n      className={clsx(classes.root, className)}\r\n    >\r\n      <DialogContent className={classes.dialogContent}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" alignItems=\"center\" marginBottom={4} position=\"relative\">\r\n            <Box display=\"flex\" flexDirection=\"column\" alignItems=\"stretch\">\r\n              <Text className={classes.label}>Approve Transaction</Text>\r\n              <Box display=\"flex\" marginTop={1} alignItems=\"center\">\r\n                {loading && (\r\n                  <CircularProgress size=\"small\" className={classes.loader} color=\"primary\" />\r\n                )}\r\n                {!loadingQueryAsks && (\r\n                  <Text>\r\n                    You are cancelling listing: {cancelledCheques.length + 1} of {sellCheques.length}.\r\n                  </Text>\r\n                )}\r\n              </Box>\r\n              {!!error && (\r\n                <Text marginTop={1} color=\"error\">\r\n                  {error?.message ?? error}\r\n                </Text>\r\n              )}\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      </DialogContent>\r\n    </DialogModal>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    \"& .MuiDialogTitle-root\": {\r\n      padding: theme.spacing(4.5, 4.5, 5),\r\n      \"& .MuiTypography-root\": {\r\n        fontFamily: \"'Raleway', sans-serif\",\r\n        fontWeight: 700,\r\n        fontSize: \"24px\",\r\n      },\r\n      \"& .MuiSvgIcon-root\": {\r\n        fontSize: \"1.8rem\",\r\n      },\r\n      \"& .MuiIconButton-root\": {\r\n        top: \"21px\",\r\n        right: \"21px\",\r\n      },\r\n    },\r\n    position: \"relative\",\r\n  },\r\n  loader: {\r\n    marginRight: theme.spacing(1),\r\n    height: theme.spacing(2),\r\n    width: theme.spacing(2),\r\n  },\r\n  label: {\r\n    fontWeight: \"bold\",\r\n    fontSize: 14,\r\n    marginBottom: 2\r\n  },\r\n  dialogContent: {\r\n    backgroundColor: theme.palette.background.default,\r\n    borderLeft: theme.palette.border,\r\n    borderRight: theme.palette.border,\r\n    borderBottom: theme.palette.border,\r\n    borderRadius: \"0 0 12px 12px\",\r\n    padding: theme.spacing(0, 4.5, 2),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: 436,\r\n    }\r\n  },\r\n}));\r\n\r\nexport default CancelDialog;\r\n","import React from \"react\";\r\nimport { Box, CardProps, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport cls from \"classnames\";\r\nimport { ArkShareLinksGroup, ArkImageView } from \"app/components\";\r\nimport { Nft } from \"app/store/types\";\r\nimport { AppTheme } from \"app/theme/types\";\r\n\r\ninterface Props extends CardProps {\r\n  token?: Nft | null,\r\n  rounded?: boolean,\r\n}\r\n\r\nconst NftImage: React.FC<Props> = (props: Props) => {\r\n  const { token, rounded, children, className, ...rest } = props;\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box  {...rest} className={cls(classes.root, className)}>\r\n      <Box className={classes.imageContainer}>\r\n        <span className={classes.imageHeight} />\r\n        <ArkImageView\r\n          className={cls(classes.image, { rounded })}\r\n          altName={token?.asset?.filename || \"Token Image\"}\r\n          imageUrl={token?.asset?.url}\r\n          imageType=\"card\"\r\n        />\r\n      </Box>\r\n      <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"flex-start\" alignItems=\"center\">\r\n        <Typography style={{ marginTop: 5, marginLeft: 10, }} variant=\"body1\">Share</Typography>\r\n        <ArkShareLinksGroup className={classes.socialLinkGroup} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    position: \"relative\",\r\n    color: theme.palette.text!.secondary,\r\n  },\r\n  imageContainer: {\r\n    borderRadius: theme.spacing(1.5),\r\n    width: \"100%\",\r\n    position: \"relative\",\r\n  },\r\n  imageHeight: {\r\n    display: \"block\",\r\n    position: \"relative\",\r\n    paddingTop: \"100%\",\r\n  },\r\n  image: {\r\n    boxShadow: theme.shadows?.[15],\r\n    position: \"absolute\",\r\n    left: 0,\r\n    top: 0,\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    objectFit: \"contain\",\r\n    '&.rounded': {\r\n      borderRadius: 16,\r\n    },\r\n  },\r\n  socialLinkGroup: {\r\n    marginTop: theme.spacing(.5),\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport default NftImage;\r\n","import { SimpleCheque } from \"app/store/types\";\r\n\r\nexport enum PriceType {\r\n  BestAsk = \"Buy Now\",\r\n  BestBid = \"Best Bid\",\r\n  LastTrade = \"Last Trade\",\r\n}\r\n\r\nexport type PriceInfo = {\r\n  type: PriceType,\r\n  cheque: SimpleCheque,\r\n}\r\n","import React from \"react\";\r\nimport { Box, BoxProps } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport cls from \"classnames\";\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { AppTheme } from \"app/theme/types\";\r\nimport { Text, ArkBox } from \"app/components\";\r\n\r\ninterface Props extends BoxProps {\r\n  topLabel?: string;\r\n  bottomLabel?: string;\r\n  tooltip?: string;\r\n}\r\n\r\nconst InfoBox: React.FC<Props> = (props: Props) => {\r\n  const { children, className, topLabel, bottomLabel, tooltip, ...rest } = props;\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <ArkBox {...rest} className={cls(classes.root, className)}>\r\n      {!!topLabel && (\r\n        <Box display=\"flex\" justifyContent=\"center\" marginBottom={0.5}>\r\n          <Text className={classes.topLabel} variant=\"body1\">{topLabel}</Text>\r\n          {typeof tooltip === \"string\" && (\r\n            <InfoOutlinedIcon className={classes.infoIcon} />\r\n          )}\r\n        </Box>\r\n      )}\r\n\r\n      <Box className={classes.content}>\r\n        {children}\r\n      </Box>\r\n\r\n      {!!bottomLabel && <Text className={classes.bottomLabel}>{bottomLabel}</Text>}\r\n    </ArkBox>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    marginRight: theme.spacing(1),\r\n    marginBottom: theme.spacing(2),\r\n    padding: theme.spacing(2, 4),\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  infoIcon: {\r\n    opacity: 0.5,\r\n    fontSize: 14,\r\n    marginLeft: theme.spacing(.5),\r\n  },\r\n  topLabel: {\r\n    fontSize: 14,\r\n  },\r\n  bottomLabel: {\r\n    opacity: 0.5,\r\n    marginTop: theme.spacing(.5),\r\n    textAlign: \"center\",\r\n  },\r\n}));\r\n\r\nexport default InfoBox;\r\n","import React, { useMemo } from \"react\";\r\nimport { Box, BoxProps, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport cls from \"classnames\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toBech32Address } from \"@zilliqa-js/zilliqa\";\r\nimport dayjs, { Dayjs } from \"dayjs\";\r\nimport { AppTheme } from \"app/theme/types\";\r\nimport { bnOrZero, toSignificantNumber, useValueCalculators } from \"app/utils\";\r\nimport { getTokens } from \"app/saga/selectors\";\r\nimport { BLOCKS_PER_MINUTE } from \"core/zilo/constants\";\r\nimport { CurrencyLogo } from \"app/components\";\r\nimport { PriceInfo, PriceType } from \"../../types\";\r\n\r\ninterface Props extends BoxProps {\r\n  data: PriceInfo;\r\n  blockTime: Dayjs;\r\n  currentBlock: number;\r\n}\r\n\r\nconst PrimaryPrice: React.FC<Props> = (props: Props) => {\r\n  const { children, className, data, blockTime, currentBlock, ...rest } = props;\r\n  const classes = useStyles();\r\n  const { tokens, prices } = useSelector(getTokens);\r\n  const valueCalculator = useValueCalculators();\r\n\r\n  const timeLeft = useMemo(() => {\r\n    if (data.type === PriceType.LastTrade) return null;\r\n    const blocksLeft = data.cheque.expiry - currentBlock;\r\n    const expiryTime = blockTime.add(blocksLeft / BLOCKS_PER_MINUTE, \"minutes\");\r\n    return expiryTime.isAfter(dayjs()) ? expiryTime.fromNow(true) + \" left\" : \"Expired \" + expiryTime.fromNow();\r\n  }, [currentBlock, blockTime, data.cheque.expiry, data.type])\r\n\r\n  const priceToken = tokens[toBech32Address(data.cheque.price.address)];\r\n  if (!priceToken) return null; // loading tokens (most likely.. lol)\r\n\r\n  const amount = bnOrZero(data.cheque.price.amount);\r\n  const priceAmount = amount.shiftedBy(-priceToken.decimals);\r\n  const priceValue = valueCalculator.amount(prices, priceToken, amount);\r\n\r\n  return (\r\n    <Box {...rest} className={cls(classes.root, className)}>\r\n      <Box>\r\n        <Typography variant=\"h6\" className={cls(classes.saleType)}>\r\n          {data.type.toUpperCase()}\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Typography variant=\"h1\" className={classes.saleInfo}>\r\n        <Box mr={1} display=\"flex\">\r\n          {toSignificantNumber(priceAmount)}\r\n          <CurrencyLogo\r\n            currency={priceToken.symbol}\r\n            address={priceToken.address}\r\n            className={classes.tokenLogo}\r\n          />\r\n        </Box>\r\n\r\n        <Box className={classes.secondaryInfo}>\r\n          {timeLeft && <Typography component=\"span\" variant=\"body1\" className={cls(classes.secondaryText)}>\r\n            {timeLeft}\r\n          </Typography>}\r\n          <Typography component=\"span\" variant=\"body1\" className={cls(classes.secondaryText)}>\r\n            ${priceValue.toFormat(2).toString()}\r\n          </Typography>\r\n        </Box>\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n  },\r\n  saleType: {\r\n    display: 'inline-block',\r\n    margin: theme.spacing(1, 0, 1.5, 0),\r\n    padding: theme.spacing(1, 2),\r\n    borderRadius: 10,\r\n    color: '#6BE1FF',\r\n    background: 'rgba(107, 225, 255, 0.2)',\r\n    fontFamily: \"Avenir Next\",\r\n    fontWeight: 900,\r\n    textTransform: 'uppercase',\r\n  },\r\n  saleInfo: {\r\n    color: theme.palette.primary!.dark,\r\n    fontWeight: \"bold\",\r\n    fontFamily: \"Avenir Next\",\r\n    display: \"flex\",\r\n    alignItems: \"flex-end\",\r\n    fontSize: 32,\r\n  },\r\n  secondaryInfo: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  secondaryText: {\r\n    color: theme.palette.text!.secondary,\r\n    fontSize: 12,\r\n    lineHeight: 1,\r\n    paddingBottom: 2,\r\n    marginLeft: 3,\r\n  },\r\n  tokenLogo: {\r\n    width: 32,\r\n    height: 32,\r\n    marginTop: -3,\r\n    marginLeft: 3,\r\n  },\r\n}));\r\n\r\nexport default PrimaryPrice;\r\n","import React, { useMemo } from \"react\";\r\nimport { Box, BoxProps, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport cls from \"classnames\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toBech32Address } from \"@zilliqa-js/zilliqa\";\r\nimport dayjs, { Dayjs } from \"dayjs\";\r\nimport { AppTheme } from \"app/theme/types\";\r\nimport { getTokens } from \"app/saga/selectors\";\r\nimport { bnOrZero, toSignificantNumber } from \"app/utils\";\r\nimport { BLOCKS_PER_MINUTE } from \"core/zilo/constants\";\r\nimport { PriceInfo, PriceType } from \"../../types\";\r\n\r\ninterface Props extends BoxProps {\r\n  data: PriceInfo;\r\n  blockTime: Dayjs;\r\n  currentBlock: number;\r\n}\r\n\r\nconst SecondaryPrice: React.FC<Props> = (props: Props) => {\r\n  const { children, className, data, blockTime, currentBlock, ...rest } = props;\r\n  const classes = useStyles();\r\n  const { tokens } = useSelector(getTokens);\r\n\r\n  const timeLeft = useMemo(() => {\r\n    if (data.type === PriceType.LastTrade) return null;\r\n    const blocksLeft = data.cheque.expiry - currentBlock;\r\n    const expiryTime = blockTime.add(blocksLeft / BLOCKS_PER_MINUTE, \"minutes\");\r\n    return expiryTime.isAfter(dayjs()) ? expiryTime.fromNow(true) + \" left\" : null;\r\n  }, [currentBlock, blockTime, data.cheque.expiry, data.type])\r\n\r\n  const priceToken = tokens[toBech32Address(data.cheque.price.address)];\r\n  if (!priceToken) return null; // loading tokens (most likely.. lol)\r\n  const priceAmount = bnOrZero(data.cheque.price.amount).shiftedBy(-priceToken.decimals)\r\n\r\n  return (\r\n    <Box {...rest} className={cls(classes.root, className)}>\r\n      <Typography variant=\"body1\" className={classes.container}>\r\n        <Typography className={classes.saleType}>\r\n          {data.type.toUpperCase()}\r\n        </Typography>\r\n        {toSignificantNumber(priceAmount)} {priceToken.symbol}\r\n        {timeLeft && <Typography className={classes.secondaryText}>\r\n          {timeLeft}\r\n        </Typography>}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    '&:not(:last-child)': {\r\n      marginRight: theme.spacing(4),\r\n    }\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    marginTop: theme.spacing(3),\r\n    alignItems: \"center\",\r\n    whiteSpace: \"nowrap\",\r\n  },\r\n  saleType: {\r\n    padding: theme.spacing(0.5, 1),\r\n    marginRight: theme.spacing(0.8),\r\n    borderRadius: 6,\r\n    color: '#6BE1FF',\r\n    background: 'rgba(107, 225, 255, 0.2)',\r\n    fontFamily: \"Avenir Next\",\r\n    fontWeight: 700,\r\n    textTransform: 'uppercase',\r\n  },\r\n  secondaryText: {\r\n    color: theme.palette.text!.secondary,\r\n    marginLeft: 5,\r\n  },\r\n}));\r\n\r\nexport default SecondaryPrice;\r\n","import React, { useMemo } from \"react\";\r\nimport { Box, BoxProps, Typography, IconButton } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport ReplayIcon from '@material-ui/icons/Replay';\r\nimport cls from \"classnames\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport { toBech32Address } from \"@zilliqa-js/crypto\";\r\nimport { darken } from '@material-ui/core/styles';\r\nimport { ArkBox, FancyButton, ZapWidget } from \"app/components\";\r\nimport { getWallet } from \"app/saga/selectors\";\r\nimport { actions } from \"app/store\";\r\nimport { Nft } from \"app/store/types\";\r\nimport { AppTheme } from \"app/theme/types\";\r\nimport { useAsyncTask, useBlockTime, useNetwork, useToaster } from \"app/utils\";\r\nimport { ArkClient } from \"core/utilities\";\r\nimport { ReactComponent as VerifiedBadge } from \"../assets/verified-badge.svg\";\r\nimport { InfoBox, PrimaryPrice, SecondaryPrice } from \"./components\";\r\nimport { PriceInfo, PriceType } from \"./types\";\r\n\r\ninterface Props extends BoxProps {\r\n  token: Nft;\r\n  tokenId: string;\r\n  isCancelling?: boolean | null;\r\n  tokenUpdatedCallback: () => void;\r\n}\r\n\r\nconst SalesDetail: React.FC<Props> = (props: Props) => {\r\n  const { token, tokenId, children, className, tokenUpdatedCallback, isCancelling, ...rest } = props;\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const network = useNetwork();\r\n  const toaster = useToaster(false);\r\n  const { wallet } = useSelector(getWallet);\r\n  const [blockTime, currentBlock] = useBlockTime();\r\n  const [runResyncMetadata] = useAsyncTask(\"resyncMetadata\");\r\n\r\n  const isOwnToken = useMemo(() => {\r\n    return (\r\n      token.owner?.address &&\r\n      wallet?.addressInfo.byte20?.toLowerCase() === token.owner?.address\r\n    );\r\n  }, [token, wallet?.addressInfo]);\r\n\r\n  // compute where price information should be displayed\r\n  const priceInfos: {\r\n    primaryPrice?: PriceInfo,\r\n    secondaryPrice1?: PriceInfo,\r\n    secondaryPrice2?: PriceInfo,\r\n  } = {}\r\n  if (token.bestAsk) {\r\n    priceInfos.primaryPrice = {\r\n      type: PriceType.BestAsk,\r\n      cheque: token.bestAsk\r\n    }\r\n  }\r\n  if (token.bestBid) {\r\n    const entry = priceInfos.primaryPrice ? 'secondaryPrice1' : 'primaryPrice'\r\n    priceInfos[entry] = {\r\n      type: PriceType.BestBid,\r\n      cheque: token.bestBid\r\n    }\r\n  }\r\n  if (token.lastTrade) {\r\n    const entry = priceInfos.primaryPrice ? (priceInfos.secondaryPrice1 ? 'secondaryPrice2' : 'secondaryPrice1') : 'primaryPrice'\r\n    priceInfos[entry] = {\r\n      type: PriceType.LastTrade,\r\n      cheque: token.lastTrade,\r\n    }\r\n  }\r\n\r\n  const onSell = () => {\r\n    if (!token.collection?.address) return;\r\n    history.push(`/arky/collections/${toBech32Address(token.collection.address)}/${token.tokenId}/sell`);\r\n  }\r\n\r\n  const onBuy = () => {\r\n    dispatch(actions.Layout.toggleShowBuyNftDialog(\"open\"));\r\n  };\r\n\r\n  const onBid = () => {\r\n    dispatch(actions.Layout.toggleShowBidNftDialog(\"open\"));\r\n  };\r\n\r\n  const onCancel = () => {\r\n    dispatch(actions.Layout.toggleShowCancelSellNftDialog(\"open\"));\r\n  };\r\n\r\n  const onResyncMetadata = () => {\r\n    runResyncMetadata(async () => {\r\n      const arkClient = new ArkClient(network);\r\n      const { result } = await arkClient.resyncMetadata(token.collection!.address, token.tokenId);\r\n      toaster(result.status);\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Box {...rest} className={cls(classes.root, className)}>\r\n      <Box className={classes.container}>\r\n        {/* Collection name */}\r\n        <Box display=\"flex\" flexDirection=\"row\">\r\n          <Box>\r\n            <Typography className={classes.collectionName}>\r\n              {token.collection?.name ?? \"\"}{\" \"}\r\n              {token.collection?.verifiedAt && <VerifiedBadge className={classes.verifiedBadge} />}\r\n            </Typography>\r\n            {<Typography className={classes.tokenId}><span className={classes.hexSymbol}>{token.name?.replace(/#\\s*\\d+$/i, \"\")} #</span>{tokenId}</Typography>}\r\n          </Box>\r\n          <Box flexGrow={1} />\r\n          <Box>\r\n            <IconButton onClick={onResyncMetadata} className={classes.menuButton}><ReplayIcon /></IconButton>\r\n          </Box>\r\n        </Box>\r\n\r\n        <Box mt={2} display=\"flex\" flexDirection=\"column\">\r\n          <Box className={classes.infoBoxContainer}>\r\n            {/* <InfoBox topLabel=\"ARKY Score\" bottomLabel=\"Top 51.1%\" tooltip={\"\"} flex={1}>\r\n              <Typography className={classes.rarityLabel} variant=\"h3\">SUPAH RARE</Typography>\r\n            </InfoBox> */}\r\n\r\n            <InfoBox topLabel=\"ZAPs\" bottomLabel=\"Like it? ZAP it!\">\r\n              <ZapWidget variant=\"bold\" onZap={tokenUpdatedCallback} token={token} />\r\n            </InfoBox>\r\n          </Box>\r\n          {priceInfos.primaryPrice &&\r\n            <ArkBox className={classes.saleInfoContainer}>\r\n              <PrimaryPrice data={priceInfos.primaryPrice} blockTime={blockTime} currentBlock={currentBlock} />\r\n              <Box className={classes.secondaryInfo}>\r\n                {priceInfos.secondaryPrice1 && <SecondaryPrice data={priceInfos.secondaryPrice1} blockTime={blockTime} currentBlock={currentBlock} mr={2} />}\r\n                {priceInfos.secondaryPrice2 && <SecondaryPrice data={priceInfos.secondaryPrice2} blockTime={blockTime} currentBlock={currentBlock} />}\r\n              </Box>\r\n            </ArkBox>\r\n          }\r\n          <Box display=\"flex\" className={cls(classes.buttonBox, { overlap: !!priceInfos.primaryPrice })}>\r\n            {!isOwnToken && (\r\n              <FancyButton containerClass={classes.button} className={classes.bidButton} disableRipple onClick={onBid}>\r\n                Place Offer\r\n              </FancyButton>\r\n            )}\r\n            {isOwnToken && token.bestAsk && (\r\n              <FancyButton loading={!!isCancelling} containerClass={classes.button} className={classes.bidButton} disableRipple onClick={onCancel}>\r\n                Cancel Listing\r\n              </FancyButton>\r\n            )}\r\n            {isOwnToken && token.collection && (\r\n              <FancyButton containerClass={classes.button} className={classes.buyButton} disableRipple onClick={onSell}>\r\n                {token.bestAsk ? \"Lower Price\" : \"Sell\"}\r\n              </FancyButton>\r\n            )}\r\n            {!isOwnToken && token.bestAsk && (\r\n              <FancyButton containerClass={classes.button} className={classes.buyButton} disableRipple onClick={onBuy}>\r\n                Buy Now\r\n              </FancyButton>\r\n            )}\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    borderRadius: theme.spacing(1.5),\r\n    border: theme.palette.border,\r\n    color: theme.palette.text!.primary,\r\n    boxShadow: theme.palette.type === \"dark\" ? \"0px 4px 20px #002028\" : 'none',\r\n    background: theme.palette.type === \"dark\" ? \"linear-gradient(173.54deg, #12222C 42.81%, #002A34 94.91%)\" : \"transparent\",\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    flexDirection: \"column\",\r\n    padding: theme.spacing(8, 9, 5, 6),\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      padding: theme.spacing(4),\r\n    },\r\n  },\r\n  tokenId: {\r\n    fontFamily: \"'Raleway', sans-serif\",\r\n    fontWeight: 600,\r\n    fontSize: \"36px\",\r\n    lineHeight: \"36px\",\r\n    marginTop: theme.spacing(0.5),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      marginTop: theme.spacing(0),\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n  },\r\n  hexSymbol: {\r\n    fontSize: '30px',\r\n  },\r\n  buttonBox: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    marginTop: theme.spacing(3),\r\n    marginRight: theme.spacing(-.5),\r\n    marginLeft: theme.spacing(-.5),\r\n    '&.overlap': {\r\n      marginTop: theme.spacing(0),\r\n      padding: theme.spacing(0, 4),\r\n      transform: \"translateY(-50%)\",\r\n    },\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      flexDirection: \"column\",\r\n      '&.overlap': {\r\n        marginTop: theme.spacing(3),\r\n        padding: theme.spacing(0),\r\n        transform: \"translateY(0%)\",\r\n      }\r\n    },\r\n  },\r\n  button: {\r\n    flex: 1,\r\n    margin: theme.spacing(0, .5),\r\n    maxWidth: 280,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      maxWidth: \"unset\",\r\n    },\r\n  },\r\n  bidButton: {\r\n    padding: theme.spacing(2.5, 4),\r\n    borderRadius: theme.spacing(1.5),\r\n    backgroundColor: \"#6BE1FF\",\r\n    \"& .MuiButton-label\": {\r\n      color: \"#003340\",\r\n    },\r\n    \"&:hover\": {\r\n      border: 'none',\r\n      backgroundColor: darken(\"#6BE1FF\", 0.1),\r\n      \"& .MuiButton-label\": {\r\n        color: darken(\"#003340\", 0.1),\r\n      },\r\n    },\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"flex\",\r\n      width: \"100%\",\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n  },\r\n  buyButton: {\r\n    padding: theme.spacing(2.5, 4),\r\n    borderRadius: theme.spacing(1.5),\r\n    border: theme.palette.border,\r\n    backgroundColor: \"#FFDF6B\",\r\n    \"& .MuiButton-label\": {\r\n      color: \"#003340\",\r\n    },\r\n    \"&:hover\": {\r\n      backgroundColor: darken(\"#FFDF6B\", 0.15),\r\n      \"& .MuiButton-label\": {\r\n        color: darken(\"#003340\", 0.15),\r\n      },\r\n    },\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"flex\",\r\n      width: \"100%\",\r\n      marginBottom: theme.spacing(1),\r\n    },\r\n  },\r\n  collectionName: {\r\n    fontFamily: \"'Raleway', sans-serif\",\r\n    fontWeight: 900,\r\n    fontSize: \"18px\",\r\n    lineHeight: \"24px\",\r\n    letterSpacing: \"0.2px\",\r\n  },\r\n  infoBoxContainer: {\r\n    display: \"flex\",\r\n    marginRight: theme.spacing(-1),\r\n    marginBottom: theme.spacing(-2),\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      flexDirection: \"column\",\r\n    },\r\n  },\r\n  secondaryInfo: {\r\n    display: \"flex\",\r\n    flex: 1,\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      flexDirection: \"column\",\r\n    },\r\n  },\r\n  saleInfoContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    marginTop: theme.spacing(3),\r\n    minHeight: theme.spacing(5),\r\n    padding: theme.spacing(2.5, 4, 7),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      padding: theme.spacing(2, 3),\r\n    },\r\n  },\r\n  rarityLabel: {\r\n    color: \"#7B61FF\",\r\n    fontFamily: \"Avenir Next\",\r\n    fontWeight: 900,\r\n    textAlign: \"center\",\r\n    WebkitTextStroke: \"4px #7B61FF33\"\r\n  },\r\n  menuButton: {\r\n    borderRadius: 8,\r\n    padding: \"8px\",\r\n    backgroundColor: theme.palette.type === \"dark\" ? \"#DEFFFF17\" : \"#6BE1FF33\",\r\n    color: theme.palette.type === \"dark\" ? \"#DEFFFF\" : \"#003340\",\r\n    \"&:hover\": {\r\n      opacity: 0.5,\r\n    },\r\n    \"& .MuiButton-label\": {\r\n      padding: \"12px 14px\",\r\n    }\r\n  },\r\n  noPadding: {\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  verifiedBadge: {\r\n    marginLeft: \"4px\",\r\n    marginTop: 2,\r\n    width: \"20px\",\r\n    height: \"20px\",\r\n    verticalAlign: \"text-top\",\r\n    alignSelf: 'flex-start',\r\n    [theme.breakpoints.down('md')]: {\r\n      height: 14,\r\n      width: 14,\r\n    }\r\n  },\r\n}));\r\n\r\nexport default SalesDetail;\r\n","import React, { useEffect } from \"react\";\r\nimport { Table, TableHead, TableBody, TableRow, TableCell, TableProps, TableContainer } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport cls from \"classnames\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { AppTheme } from \"app/theme/types\";\r\nimport { Nft } from \"app/store/types\";\r\nimport { bnOrZero, useAsyncTask, useNetwork } from \"app/utils\";\r\nimport { ArkClient } from \"core/utilities\";\r\nimport { getMarketplace } from \"app/saga/selectors\";\r\nimport { actions } from \"app/store\";\r\n\r\ninterface Props extends TableProps {\r\n  token: Nft;\r\n}\r\n\r\nconst TraitTable: React.FC<Props> = (props: Props) => {\r\n  const { token, children, className, ...rest } = props;\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n  const network = useNetwork();\r\n  const { collections, collectionTraits } = useSelector(getMarketplace);\r\n  const [runGetCollectionTraits] = useAsyncTask(\"getCollectionTraits\");\r\n\r\n  const collectionAddress = token.collection.address.toLowerCase();\r\n  const currentCollectionTraits = collectionTraits[collectionAddress];\r\n  const collection = collections[collectionAddress]\r\n\r\n  const total = bnOrZero(collection?.tokenStat.tokenCount);\r\n\r\n  useEffect(() => {\r\n    runGetCollectionTraits(async () => {\r\n      if (!collection || !currentCollectionTraits) {\r\n        const arkClient = new ArkClient(network);\r\n        const res = await arkClient.getCollectionTraits(collectionAddress);\r\n        dispatch(actions.MarketPlace.updateCollectionTraits(res));\r\n      }\r\n    })\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  const getPercent = (c?: number) => {\r\n    const count = bnOrZero(c)\r\n    if (count.lte(0) || total.isZero()) return \"-\"\r\n    const percent = count.div(total);\r\n    return `${percent.shiftedBy(2).toFormat(percent.lt(1) ? 2 : 0)} %`\r\n  }\r\n\r\n  return (\r\n    <TableContainer>\r\n      <Table {...rest} className={cls(classes.root, className)}>\r\n        <TableHead>\r\n          <TableRow className={classes.header}>\r\n            {[\"Category\", \"Attribute\", \"Rarity\", \"Rarity %\"].map((head, index) => (\r\n              <TableCell align=\"center\" key={head}>{head}</TableCell>\r\n            ))}\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {token.traitValues.sort((a, b) => a.traitType.trait.localeCompare(b.traitType.trait)).map((value) => {\r\n            const trait = value.traitType.trait\r\n            return <TableRow className={classes.bodyRow} key={value.value}>\r\n              <TableCell className={cls(classes.key, 'highlight')} align=\"center\">{trait}</TableCell>\r\n              <TableCell className=\"highlight\" align=\"center\">{value.value || \"-\"}</TableCell>\r\n              <TableCell align=\"center\">{value.count || \"-\"}</TableCell>\r\n              <TableCell align=\"center\">{getPercent(value.count)}</TableCell>\r\n            </TableRow>\r\n          })}\r\n          {(!token.traitValues || token.traitValues.length === 0) && (\r\n            <TableRow>\r\n              <TableCell colSpan={4} className={cls(classes.emptyState, 'row')}>\r\n                No trait data yet.\r\n              </TableCell>\r\n            </TableRow>\r\n          )}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    \"& .MuiTableCell-root\": {\r\n      borderBottom: theme.palette.border,\r\n    }\r\n  },\r\n  header: {\r\n    \"& .MuiTableCell-root\": {\r\n      fontSize: 12,\r\n      fontFamily: 'Avenir Next',\r\n      fontWeight: 600,\r\n      opacity: 0.8,\r\n      letterSpacing: '0.1px',\r\n    }\r\n  },\r\n  key: {\r\n    opacity: 0.8,\r\n  },\r\n  bodyRow: {\r\n    \"&:last-child\": {\r\n      \"& .MuiTableCell-root\": {\r\n        borderBottom: \"none\",\r\n      }\r\n    },\r\n    \"& .MuiTableCell-root\": {\r\n      fontSize: 14,\r\n      fontWeight: 600,\r\n      fontFamily: 'Avenir Next',\r\n      whiteSpace: \"nowrap\",\r\n      '&.highlight': {\r\n        fontSize: 15,\r\n        fontWeight: 700,\r\n      }\r\n    }\r\n  },\r\n  emptyState: {\r\n    textAlign: 'center',\r\n    fontSize: 14,\r\n    opacity: 0.8,\r\n    '&.row': {\r\n      paddingTop: theme.spacing(3),\r\n      borderBottom: 'none',\r\n    },\r\n    '&.box': {\r\n      padding: theme.spacing(2, 0),\r\n    }\r\n  },\r\n}));\r\n\r\nexport default TraitTable;\r\n","import React, { Fragment, useEffect, useState, useMemo } from \"react\";\r\nimport { Avatar, Badge, Box, Container, ListItemIcon, MenuItem, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Transaction } from \"@zilliqa-js/account\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ArkBidsTable, ArkBreadcrumb, ArkPriceHistoryGraph, ArkTab, ArkOwnerLabel, ArkBox } from \"app/components\";\r\nimport ArkPage from \"app/layouts/ArkPage\";\r\nimport { getBlockchain, getMarketplace, getWallet } from \"app/saga/selectors\";\r\nimport { Nft, Profile } from \"app/store/types\";\r\nimport { AppTheme } from \"app/theme/types\";\r\nimport { bnOrZero, tryGetBech32Address, useAsyncTask } from \"app/utils\";\r\nimport { ArkClient, waitForTx } from \"core/utilities\";\r\nimport { fromBech32Address } from \"core/zilswap\";\r\nimport { actions } from \"app/store\";\r\nimport { ReactComponent as VerifiedBadge } from \"../CollectionView/verified-badge.svg\";\r\nimport { BidDialog, BuyDialog, CancelDialog, NftImage, SalesDetail, TraitTable } from \"./components\";\r\n\r\nconst NftView: React.FC<React.HTMLAttributes<HTMLDivElement>> = (props: any) => {\r\n  const { children, className, match, ...rest } = props;\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const { network } = useSelector(getBlockchain);\r\n  const { bidsTable, pendingTxs } = useSelector(getMarketplace);\r\n  const { wallet } = useSelector(getWallet);\r\n  const [token, setToken] = useState<Nft>();\r\n  const [runGetNFTDetails] = useAsyncTask(\"runGetNFTDetails\");\r\n  const [runGetBids] = useAsyncTask(\"getBids\");\r\n  const [owner, setOwner] = useState<Profile>();\r\n  const [runGetOwner] = useAsyncTask(\"getOwner\");\r\n  const [currentTab, setCurrentTab] = useState(\"Bids\");\r\n\r\n  const collectionId = match.params.collection;\r\n  const tokenId = match.params.id;\r\n\r\n  const royaltiesPercent = useMemo(() => {\r\n    const royaltyBps = token?.collection?.royaltyBps;\r\n    if (!royaltyBps) return null;\r\n\r\n    const percent = bnOrZero(royaltyBps).shiftedBy(-2).decimalPlaces(2);\r\n    return percent.toFormat();\r\n  }, [token?.collection]);\r\n\r\n  // fetch nft data, if none redirect back to collections / show not found view\r\n  useEffect(() => {\r\n    getData();\r\n    // eslint-disable-next-line\r\n  }, [collectionId, tokenId, network]);\r\n\r\n  useEffect(() => {\r\n    if (wallet) {\r\n      getNFTDetails();\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [wallet])\r\n\r\n  const onCancelListing = async (txs: Transaction[]) => {\r\n    await Promise.all(txs.map(tx => waitForTx(tx.id!, 300, 1000)));\r\n\r\n    // wait 3s for backend to sync\r\n    await new Promise(resolve => setTimeout(resolve, 3000));\r\n\r\n    getData();\r\n  };\r\n\r\n  const getData = () => {\r\n    getNFTDetails();\r\n    getBids();\r\n  }\r\n\r\n  const getBids = () => {\r\n    runGetBids(async () => {\r\n      dispatch(actions.MarketPlace.updateBidsTable(undefined));\r\n\r\n      const arkClient = new ArkClient(network);\r\n      const collectionAddress = fromBech32Address(collectionId).toLowerCase();\r\n      const result = await arkClient.listNftCheques({ collectionAddress, tokenId, side: \"buy\" });\r\n\r\n      dispatch(actions.MarketPlace.updateBidsTable({\r\n        bids: result.result.entries,\r\n        collectionAddress,\r\n        tokenId,\r\n        side: \"buy\",\r\n      }));\r\n    })\r\n  }\r\n\r\n  const getNFTDetails = (bypass?: boolean) => {\r\n    runGetNFTDetails(async () => {\r\n      const arkClient = new ArkClient(network);\r\n      const address = fromBech32Address(collectionId).toLowerCase()\r\n      const viewerAddress = wallet?.addressInfo.byte20.toLowerCase()\r\n      const { result } = await arkClient.getNftToken(address, tokenId, viewerAddress);\r\n      setToken(result.model);\r\n\r\n      const { model: { owner } } = result\r\n      if (owner && !bypass) {\r\n        runGetOwner(async () => {\r\n          const ownerResult = await arkClient.getProfile(owner.address.toLowerCase());\r\n          setOwner(ownerResult.result.model)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  const isCancelling = token?.bestAsk && !!Object.values(pendingTxs).find(tx => tx.chequeHash === token?.bestAsk?.chequeHash);\r\n\r\n  const breadcrumbs = [\r\n    { path: \"/arky/discover\", value: \"Discover\" },\r\n    {\r\n      path: `/arky/collections/${collectionId}`,\r\n      value: `${token?.collection?.name}`,\r\n    },\r\n    {\r\n      path: `/arky/collections/${collectionId}/${tokenId}`,\r\n      value: `#${tokenId}`,\r\n    },\r\n  ];\r\n\r\n  const ownerAddr = tryGetBech32Address(owner?.address);\r\n  return (\r\n    <ArkPage {...rest}>\r\n      <Container className={classes.root} maxWidth=\"lg\">\r\n        <ArkBreadcrumb linkPath={breadcrumbs} />\r\n\r\n        {/* Nft image and main info */}\r\n        <Container disableGutters className={classes.imageInfoContainer}>\r\n          <NftImage className={classes.nftImage} token={token} rounded={true} />\r\n          {token && <SalesDetail className={classes.mainInfoBox} tokenId={tokenId} token={token} isCancelling={isCancelling} tokenUpdatedCallback={() => getNFTDetails()} />}\r\n        </Container>\r\n\r\n        {/* About info and trait table */}\r\n        <Box mt={4} display=\"flex\" className={classes.smColumn}>\r\n          <ArkBox variant=\"base\" display=\"flex\" flexDirection=\"column\" className={classes.aboutContainer}>\r\n            <Typography className={classes.aboutHeader} variant=\"h1\">About</Typography>\r\n            <Typography className={classes.aboutText}>\r\n              {token?.collection?.description}\r\n            </Typography>\r\n            <Box className={classes.xsColumn} mt={4} display=\"flex\" justifyContent=\"center\">\r\n              <Box flexGrow={1} marginRight={1}>\r\n                <MenuItem component={Link} to={`/arky/profile?address=${ownerAddr}`} className={classes.aboutMenuItem} button={false}>\r\n                  <ListItemIcon><Avatar className={classes.avatar} alt=\"owner\" src={owner?.profileImage?.url || \"\"} /></ListItemIcon>\r\n                  <Box className={classes.aboutItemText}>\r\n                    <Typography>Owner</Typography>\r\n                    <ArkOwnerLabel user={owner} />\r\n                  </Box>\r\n                </MenuItem>\r\n              </Box>\r\n              {token?.collection?.ownerName &&\r\n                <Box flexGrow={1}>\r\n                  <MenuItem className={classes.aboutMenuItem} button={false}>\r\n                    <ListItemIcon style={{ paddingBottom: 5 }}>\r\n                      <Badge\r\n                        overlap=\"circle\"\r\n                        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n                        badgeContent={\r\n                          token.collection.verifiedAt ? <VerifiedBadge /> : undefined\r\n                        }\r\n                      >\r\n                        <Avatar className={classes.avatar} sizes=\"medium\" alt=\"Collection owner\" src={\"\"} />\r\n                      </Badge>\r\n                    </ListItemIcon>\r\n                    <Box className={classes.aboutItemText}>\r\n                      <Typography>Creator</Typography>\r\n                      <Typography variant=\"h3\" className={classes.aboutNameText}>{token?.collection?.ownerName}</Typography>\r\n                      {royaltiesPercent && (\r\n                        <Typography>{royaltiesPercent}% Royalties</Typography>\r\n                      )}\r\n                    </Box>\r\n                  </MenuItem>\r\n                </Box>\r\n              }\r\n            </Box>\r\n          </ArkBox>\r\n          <ArkBox variant=\"base\" className={classes.traitContainer}>\r\n            {token && <TraitTable token={token} />}\r\n          </ArkBox>\r\n        </Box>\r\n\r\n\r\n        {/*Arky tabs */}\r\n        <ArkTab mt={3} setCurrentTab={(tab: string) => { setCurrentTab(tab) }} currentTab={currentTab} tabHeaders={[\"Bids\", \"Price History\", \"Event History\"]} />\r\n\r\n        {currentTab === \"Bids\" && (\r\n          <ArkBidsTable bids={bidsTable?.bids ?? []} showItem={false} />\r\n        )}\r\n        {currentTab === \"Price History\" && (\r\n          <ArkPriceHistoryGraph collectionId={collectionId} tokenId={tokenId} />\r\n        )}\r\n        {currentTab === \"Event History\" && (\r\n          <ArkBox variant=\"base\" className={classes.comingSoon}>Coming Soon.</ArkBox>\r\n        )}\r\n        {/* Price History */}\r\n        {/* Event History */}\r\n      </Container >\r\n      {token && (\r\n        <Fragment>\r\n          <BuyDialog token={token} collectionAddress={collectionId} onComplete={getData} />\r\n          <BidDialog token={token} collectionAddress={collectionId} onComplete={getData} />\r\n          <CancelDialog token={token} onComplete={onCancelListing} />\r\n        </Fragment>\r\n      )}\r\n    </ArkPage >\r\n  );\r\n};\r\n\r\n\r\nconst useStyles = makeStyles((theme: AppTheme) => ({\r\n  root: {\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      padding: 0,\r\n      paddingBottom: theme.spacing(3),\r\n    },\r\n    paddingBottom: '30vh',\r\n  },\r\n  breadcrumbs: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  breadcrumb: {\r\n    fontFamily: \"'Raleway', sans-serif\",\r\n    fontWeight: 700,\r\n    fontSize: \"16px\",\r\n    color: \"#6BE1FF\",\r\n    \"-webkit-text-stroke-color\": \"rgba(107, 225, 255, 0.2)\",\r\n    \"-webkit-text-stroke-width\": \"1px\",\r\n  },\r\n  imageInfoContainer: {\r\n    alignItems: \"center\",\r\n    marginTop: theme.spacing(3),\r\n    display: \"flex\",\r\n    [theme.breakpoints.down(850)]: {\r\n      flexDirection: \"column\",\r\n    },\r\n  },\r\n  nftImage: {\r\n    maxWidth: 450,\r\n    marginTop: 35,\r\n    position: \"relative\",\r\n    width: \"50vw\",\r\n    [theme.breakpoints.down(850)]: {\r\n      padding: theme.spacing(0, 4),\r\n      width: \"100%\",\r\n      marginBottom: theme.spacing(2),\r\n    },\r\n  },\r\n  mainInfoBox: {\r\n    flex: 1,\r\n    marginLeft: theme.spacing(-10),\r\n    paddingLeft: theme.spacing(10),\r\n    [theme.breakpoints.down(850)]: {\r\n      marginLeft: theme.spacing(0),\r\n      paddingLeft: theme.spacing(0),\r\n      width: \"100%\",\r\n    },\r\n  },\r\n  verifiedBadge: {\r\n    marginLeft: \"4px\",\r\n    width: \"22px\",\r\n    height: \"22px\",\r\n    verticalAlign: \"text-bottom\",\r\n  },\r\n  bidsHeader: {\r\n    fontSize: \"26px\",\r\n    lineHeight: \"40px\",\r\n    fontFamily: \"'Raleway', sans-serif\",\r\n    fontWeight: 700,\r\n    color: \"#DEFFFF\",\r\n  },\r\n  halfOpacity: {\r\n    opacity: 0.5,\r\n    color: theme.palette.primary.contrastText\r\n  },\r\n  aboutContainer: {\r\n    color: theme.palette.text!.primary,\r\n    maxWidth: 450,\r\n    padding: theme.spacing(7, 6),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      padding: theme.spacing(2, 3),\r\n      maxWidth: \"none\",\r\n    },\r\n  },\r\n  aboutHeader: {\r\n    fontFamily: \"'Raleway', sans-serif\",\r\n    fontWeight: \"bold\",\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  aboutText: {\r\n    fontSize: 14,\r\n    lineHeight: 1.4,\r\n    opacity: 0.8,\r\n  },\r\n  traitContainer: {\r\n    minWidth: 400,\r\n    flex: 1,\r\n    padding: theme.spacing(4, 5),\r\n    marginLeft: theme.spacing(2),\r\n    overflowX: 'auto',\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      marginLeft: 0,\r\n      minWidth: 0,\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  },\r\n  aboutMenuItem: {\r\n    extend: 'text',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'stretch',\r\n    padding: \"0\",\r\n    maxWidth: 200,\r\n    margin: 0,\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      marginTop: theme.spacing(1),\r\n    },\r\n  },\r\n  aboutItemText: {\r\n    display: 'flex',\r\n    margin: theme.spacing(0.5, 0, 0.5, 1),\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-evenly',\r\n    color: theme.palette.text!.primary,\r\n    opacity: 0.8,\r\n  },\r\n  avatar: {\r\n    width: 52,\r\n    height: 52,\r\n  },\r\n  aboutNameText: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    maxWidth: 100,\r\n    textOverflow: \"ellipsis\",\r\n    overflow: \"hidden\",\r\n    whiteSpace: \"nowrap\",\r\n  },\r\n  xsColumn: {\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      flexDirection: \"column\",\r\n    }\r\n  },\r\n  smColumn: {\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      flexDirection: \"column\",\r\n    }\r\n  },\r\n  comingSoon: {\r\n    margin: theme.spacing(3, 0),\r\n    padding: theme.spacing(3),\r\n    textAlign: 'center',\r\n    fontSize: 14,\r\n    opacity: 0.8,\r\n  }\r\n}));\r\n\r\nexport default NftView;\r\n"],"sourceRoot":""}