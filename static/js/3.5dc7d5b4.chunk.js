(this["webpackJsonpzilswap-webapp"]=this["webpackJsonpzilswap-webapp"]||[]).push([[3],{2041:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return J}));var r,n=a(3),c=a(2),i=a.n(c),s=a(20),o=a(12),d=a(26),l=a(7),b=a(1),u=a(1903),j=a(1973),p=a(2001),f=a(121),O=a(1948),x=a(1947),h=a(62),v=a(10),g=a.n(v),m=a(37),w=a.n(m),k=a(16),y=a(73),B=a(22),T=a(34),C=a(2013),N=a(23),L=a(9),S=(a(2024),a(43)),P=a(0),A=Object(x.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(2)}}})),I=function(e){var t,a=e.address,r=e.className,c=A(),d=Object(k.b)(),l=Object(k.c)(S.a).network,u=Object(k.c)(S.c).bidsTable,j=Object(b.useState)(!1),f=Object(o.a)(j,2),O=f[0],x=f[1],h=Object(L.o)("getBids"),v=Object(o.a)(h,1)[0];return Object(b.useEffect)((function(){v(Object(s.a)(i.a.mark((function e(){var t,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(N.a.MarketPlace.updateBidsTable(void 0)),t=new B.b(l),r={initiatorAddress:a,isActive:O?"true":void 0,side:"buy"},e.next=5,t.listNftCheques(r);case 5:c=e.sent,d(N.a.MarketPlace.updateBidsTable(Object(n.a)({bids:c.result.entries},r)));case 7:case"end":return e.stop()}}),e)}))))}),[l,a,O]),Object(P.jsxs)(p.a,{className:g()(c.root,r),children:[Object(P.jsx)(T.y,{onCheck:x,label:"Show active offers only\xa0"}),Object(P.jsx)(T.d,{bids:null!==(t=null===u||void 0===u?void 0:u.bids)&&void 0!==t?t:[]})]})},F=Object(x.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(2)}}})),E=function(e){var t,a=e.address,r=e.className,c=F(),d=Object(k.b)(),l=Object(k.c)(S.a).network,u=Object(k.c)(S.c).bidsTable,j=Object(b.useState)(!1),f=Object(o.a)(j,2),O=f[0],x=f[1],h=Object(L.o)("getBids"),v=Object(o.a)(h,1)[0];return Object(b.useEffect)((function(){v(Object(s.a)(i.a.mark((function e(){var t,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(N.a.MarketPlace.updateBidsTable(void 0)),t=new B.b(l),r={ownerAddress:a,isActive:O?"true":void 0,side:"buy"},e.next=5,t.listNftCheques(r);case 5:c=e.sent,d(N.a.MarketPlace.updateBidsTable(Object(n.a)({bids:c.result.entries},r)));case 7:case"end":return e.stop()}}),e)}))))}),[l,a,O]),Object(P.jsxs)(p.a,{className:g()(c.root,r),children:[Object(P.jsx)(T.y,{onCheck:x,label:"Show active offers only\xa0"}),Object(P.jsx)(T.d,{bids:null!==(t=null===u||void 0===u?void 0:u.bids)&&void 0!==t?t:[]})]})},M=function(e){var t=e.address,a=e.filter,r=e.className,n=Object(k.c)((function(e){return e.blockchain})),c=Object(k.b)(),i=t.toLowerCase();return Object(b.useEffect)((function(){c(N.a.MarketPlace.updateFilter({collectionAddress:void 0,traits:{},saleType:{fixed_price:"onSale"===a,timed_auction:!1},likedBy:"liked"===a?i:void 0,owner:["collected","onSale"].includes(a)?i:void 0}))}),[n.ready,t,a]),Object(P.jsx)(p.a,{className:r,children:Object(P.jsx)(T.n,{filterComponent:Object(P.jsx)(p.a,{marginTop:2,children:Object(P.jsx)(T.t,{})})})})},R=["title","titleId"];function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function _(e,t){var a=e.title,n=e.titleId,c=U(e,R);return b.createElement("svg",z({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},c),a?b.createElement("title",{id:n},a):null,r||(r=b.createElement("path",{d:"M11.4098 1.61598C11.8042 1.22158 12.3391 1 12.8969 1C13.4547 1 13.9896 1.22158 14.384 1.61598C14.7784 2.01039 15 2.54532 15 3.1031C15 3.66087 14.7784 4.1958 14.384 4.59021L4.96563 14.0086L1 15L1.99141 11.0344L11.4098 1.61598Z",stroke:"#DEFFFF",strokeOpacity:.5,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))}var q=b.forwardRef(_),W=(a.p,["children","className"]),D=Object(x.a)((function(e){var t,a;return{root:Object(l.a)({},e.breakpoints.down("xs"),{padding:0}),badge:{backgroundColor:e.palette.background.contrast},addressBox:{textAlign:"center",width:"100%",marginTop:e.spacing(.5)},addressBadge:{extend:"badge",borderRadius:"12px",padding:"8px 24px",color:"dark"===e.palette.type?"#DEFFFF":"#003340",alignSelf:"center",width:"fit-content",cursor:"pointer",margin:"auto",marginTop:e.spacing(1),marginBottom:e.spacing(1)},bioBox:{width:480,maxWidth:"90%",boxSizing:"border-box",borderRadius:"12px",textAlign:"center",color:null===(t=e.palette.text)||void 0===t?void 0:t.primary,opacity:.8,margin:"auto",marginTop:e.spacing(3),"&.border":{border:e.palette.border,filter:"drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25))"}},textLink:{fontSize:12,color:null===(a=e.palette.text)||void 0===a?void 0:a.primary},editIcon:{display:"inline-block",lineHeight:0,marginLeft:8,marginRight:-31,padding:7,borderRadius:8,"& svg":{width:13,height:13,fill:"dark"===e.palette.type?void 0:"#0D1B24"},"&:hover":{extend:"badge",cursor:"pointer","& svg > path":{stroke:"#00FFB0","stroke-opacity":1}}},button:{padding:"16px",margin:e.spacing(2,0,0),minHeight:"50px"},connectionText:{margin:e.spacing(1)},tabs:{marginTop:e.spacing(5)}}})),H=function(e){try{return e?e.startsWith("0x")?Object(h.toBech32Address)(e):e.startsWith("zil1")&&Object(h.fromBech32Address)(e)?e:null:null}catch(t){return null}},J=function(e){e.children,e.className;var t,a,r=Object(d.a)(e,W),c=D(),l=Object(u.a)((function(e){return e.breakpoints.down("xs")})),x=Object(k.c)((function(e){return e.wallet})).wallet,v=Object(k.c)((function(e){return e.marketplace})),m=v.profile,S=v.oAuth,A=Object(b.useState)("Collected"),F=Object(o.a)(A,2),R=F[0],z=F[1],U=Object(b.useState)(null),_=Object(o.a)(U,2),J=_[0],Y=_[1],Z=Object(b.useState)("Copy address"),G=Object(o.a)(Z,2),K=G[0],Q=G[1],V=Object(L.v)(),X=Object(k.b)(),$=Object(L.z)(!1),ee=Object(L.o)("queryProfile"),te=Object(o.a)(ee,1)[0],ae=Object(L.o)("uploadBanner"),re=Object(o.a)(ae,1)[0],ne=Object(L.y)("uploadBanner","queryProfile","loadProfile"),ce=Object(o.a)(ne,1)[0],ie=new URLSearchParams(window.location.search),se=H(ie.get("address")),oe=H(null===x||void 0===x?void 0:x.addressInfo.bech32),de=se&&se.length>0,le=de?se:oe,be=!de||oe===le;Object(b.useEffect)((function(){be&&m?Y(m):le&&te(Object(s.a)(i.a.mark((function e(){var t,a,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new B.b(V),a=Object(h.fromBech32Address)(le),e.next=4,t.getProfile(a.toLowerCase());case 4:r=e.sent,n=r.result.model,Y(n);case 7:case"end":return e.stop()}}),e)}))))}),[le,m,V]);var ue=["Collected","For Sale","Liked","Bids Made"];be&&(ue=ue.concat(["Bids Received"]));return Object(P.jsx)(C.a,Object(n.a)(Object(n.a)({},r),{},{children:Object(P.jsxs)(j.a,{className:c.root,maxWidth:"lg",children:[Object(P.jsx)(T.c,{uploadBanner:be?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"banner";re(Object(s.a)(i.a.mark((function a(){var r,n,c,s,o,d;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&x){a.next=2;break}return a.abrupt("return");case 2:if(r=new B.b(V),n=S,!(!(null===S||void 0===S?void 0:S.access_token)||S.address!==x.addressInfo.bech32||S&&w()(1e3*(null===S||void 0===S?void 0:S.expires_at)).isBefore(w()()))){a.next=11;break}return a.next=7,r.arkLogin(x,window.location.hostname);case 7:c=a.sent,s=c.result,X(N.a.MarketPlace.updateAccessToken(s)),n=s;case 11:return a.next=13,r.requestImageUploadUrl(x.addressInfo.byte20,n.access_token,t);case 13:return o=a.sent,d=new Blob([e],{type:e.type}),a.next=17,r.putImageUpload(o.result.uploadUrl,d);case 17:return a.next=19,r.notifyUpload(x.addressInfo.byte20,S.access_token,t);case 19:X(N.a.MarketPlace.loadProfile()),$("Banner updated");case 21:case"end":return a.stop()}}),a)}))))}:void 0,bannerImage:ce||null===J||void 0===J||null===(t=J.bannerImage)||void 0===t?void 0:t.url,avatarImage:ce||null===J||void 0===J||null===(a=J.profileImage)||void 0===a?void 0:a.url}),Object(P.jsx)(p.a,{className:c.addressBox,children:le&&Object(P.jsxs)(b.Fragment,{children:[Object(P.jsxs)(f.a,{variant:"h2",children:[(null===J||void 0===J?void 0:J.username)||Object(L.m)(le||""),be&&Object(P.jsx)(p.a,{className:c.editIcon,children:Object(P.jsx)(y.Link,{to:"/arky/profile/".concat(le,"/edit"),children:Object(P.jsx)(q,{})})})]}),Object(P.jsx)(O.a,{title:K,placement:"right",arrow:!0,children:Object(P.jsx)(p.a,{onClick:function(){return le&&(e=le,navigator.clipboard.writeText(e),Q("Copied!"),void setTimeout((function(){Q("Copy address")}),2e3));var e},className:c.addressBadge,children:Object(P.jsx)(f.a,{variant:"body1",children:Object(L.m)(le||"",l)})})})]})}),be&&le&&!(null===J||void 0===J?void 0:J.bio)&&Object(P.jsx)(p.a,{className:c.bioBox,padding:3,children:Object(P.jsx)(y.Link,{className:c.textLink,to:"/arky/profile/".concat(le,"/edit"),children:Object(P.jsx)("u",{children:"Add Bio"})})}),(null===J||void 0===J?void 0:J.bio)&&Object(P.jsx)(p.a,{className:g()(c.bioBox,{border:be&&le}),padding:3,children:Object(P.jsxs)(f.a,{children:[null===J||void 0===J?void 0:J.bio,be&&le&&Object(P.jsx)(y.Link,{className:c.textLink,to:"/arky/profile/".concat(le,"/edit"),style:{marginLeft:8},children:Object(P.jsx)("u",{children:"Edit"})})]})}),Object(P.jsx)(T.x,{className:c.tabs,setCurrentTab:function(e){return z(e)},currentTab:R,tabHeaders:ue}),x||le?function(){if(!le)return null;var e=Object(h.fromBech32Address)(le);switch(R){case"Collected":return Object(P.jsx)(M,{address:e,filter:"collected"});case"For Sale":return Object(P.jsx)(M,{address:e,filter:"onSale"});case"Liked":return Object(P.jsx)(M,{address:e,filter:"liked"});case"Bids Made":return Object(P.jsx)(I,{address:e});case"Bids Received":return be&&Object(P.jsx)(E,{address:e});default:return null}}():Object(P.jsx)(p.a,{mt:12,display:"flex",justifyContent:"center",children:Object(P.jsxs)(p.a,{display:"flex",flexDirection:"column",textAlign:"center",children:[Object(P.jsx)(f.a,{className:c.connectionText,variant:"h1",children:"Your wallet is not connected."}),Object(P.jsx)(f.a,{className:c.connectionText,variant:"body1",children:"Please connect your wallet to view this page."})]})})]})}))}}}]);
//# sourceMappingURL=3.5dc7d5b4.chunk.js.map